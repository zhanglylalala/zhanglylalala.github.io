<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://http://www.laughingtree.cn').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="LaughingTree">
<meta property="og:url" content="http://http//www.laughingtree.cn/index.html">
<meta property="og:site_name" content="LaughingTree">
<meta property="article:author" content="LiyunZhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://http//www.laughingtree.cn/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>LaughingTree</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LaughingTree</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags<span class="badge">28</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories<span class="badge">34</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2021/02/08/10-%E5%BA%94%E7%94%A8%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/08/10-%E5%BA%94%E7%94%A8%E5%B1%82/" class="post-title-link" itemprop="url">10. 应用层</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-08 23:55:32" itemprop="dateCreated datePublished" datetime="2021-02-08T23:55:32+08:00">2021-02-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-02-09 15:30:21" itemprop="dateModified" datetime="2021-02-09T15:30:21+08:00">2021-02-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ol>
<li>应用层对应用程序的通信提供服务</li>
<li>应用层的功能：文件传输、访问和管理；电子邮件；虚拟终端；查询服务和远程作业登录</li>
<li>客户/服务器模型 (C/S模型)<br />服务器：提供计算机服务的设备，永久提供服务，有永久性访问地址/域名<br />客户机：请求服务器服务的主机，间歇性接入网络，可能使用动态IP地址，不与其他客户急直接通信<br />应用：Web，文件传输FTP，远程登录，电子邮件</li>
<li>P2P模型：不存在永远在线的服务器，每个主机既可以提供服务，也可以请求服务，任意端系统/结点之间可以直接通讯。结点间歇性接入网络，可能改变IP地址。可扩展性好，网络健壮性强</li>
</ol>
<h1 id="DNS系统"><a href="#DNS系统" class="headerlink" title="DNS系统"></a>DNS系统</h1><ol>
<li>DNS服务的作用：将域名解析成IP地址，供客户机访问</li>
<li>域名中的不同部分用点号$.$分开，最后一部分为顶级域名，倒数第二部分为二级域名，倒数第三部分为三级域名等</li>
<li>顶级域名<br />国家顶级域名：$cn,us,uk$<br />通用顶级域名：$com,net,org,gov,int,aero,museum,travel$<br />基础结构域名/反向域名：$arpa$</li>
<li>二级域名<br />类别域名：$ac,com,edu,gov,mil,net,org$<br />行政区域名：用于我国各省、自治区、直辖市，如$bj,js$</li>
<li>部分二级域名和顶级域名有重合，判断是哪一级不能看是哪个，要看在哪个位置</li>
<li>域名服务器在域名高速缓存中直接存储了一些域名对应的IP地址，它们还存储了各个下一级域名服务器的地址</li>
<li>根域名服务器管理所有的根域名，顶级域名服务器管理该顶级域名服务器注册的所有二级域名，权限域名服务器负责一个区的域名服务器</li>
<li>当主机发出一个DNS查询请求时，这个查询请求报文就发给本地域名服务器</li>
<li>递归查询<br />若主机的高速缓存中没有要查询的地址，则询问本地域名服务器<br />若本地域名服务器的高速缓存中没有要查询的地址，则本地域名服务器询问根域名服务器<br />若根域名服务器的高速缓存中没有要查询的地址，则询问相应的顶级域名服务器<br />若顶级域名服务器的高速缓存中没有要查询的地址，则询问相应的权限域名服务器<br />权限域名服务器将结果返回给顶级域名服务器<br />顶级域名服务器将结果返回给根域名服务器<br />根域名服务器将结果返回给本地域名服务器<br />本地域名服务器将结果返回给主机<br />同时它们都把地址保存在自身的高速缓存中</li>
<li>迭代查询<br />若主机的高速缓存中没有要查询的地址，则询问本地域名服务器<br />若本地域名服务器的高速缓存中没有要查询的地址，则本地域名服务器询问根域名服务器<br />若根域名服务器的高速缓存中没有要查询的地址，则返回相应的顶级域名服务器给本地域名服务器<br />本地域名服务器询问顶级域名服务器，若顶级域名服务器的高速缓存中没有要查询的地址，则返回相应的权限域名服务器给本地域名服务器<br />本地域名服务器询问权限域名服务器，权限域名服务器将结果返回给本地域名服务器<br />本地域名服务器将结果返回给主机<br />同时它们都把地址保存在自身的高速缓存中</li>
</ol>
<h1 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h1><ol>
<li>功能：提供不同类型主机系统 (硬软件体系等都可以不同)之间的文件传输能力</li>
<li>FTP是基于C/S模型的协议，FTP服务器中的服务器进程包含了1个主进程和n个从属进程</li>
<li>FTP使用TCP实现可靠传输</li>
<li>登录FTP必须有FTP地址，FTP支持用户名密码登录，也提供匿名登录。提供匿名登录的FTP服务器被称为匿名FTP服务器</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2021/02/08/09-%E4%BC%A0%E8%BE%93%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/08/09-%E4%BC%A0%E8%BE%93%E5%B1%82/" class="post-title-link" itemprop="url">09. 传输层</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-02-08 20:35:17 / Modified: 23:28:17" itemprop="dateCreated datePublished" datetime="2021-02-08T20:35:17+08:00">2021-02-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ol>
<li>功能：提供进程与进程之间的逻辑通信 (网络层提供主机之间的逻辑通信)；复用和分用；对收到的报文进行差错检测</li>
<li>面向连接的TCP协议：传送数据前必须建立连接，数据传送结束后要释放连接。不提供广播或多播服务<br />由于TCP要提供可靠的面向连接，不可避免增加了许多开销：确认、流量控制、计时器、连接管理<br />TCP可靠，面向连接，时延大，适用于大文件</li>
<li>无连接的UDP协议：传送数据前不需要建立连接，收到UDP报文后也不需要给出任何确认<br />UDP不可靠，无连接，时延小，适用于小文件</li>
<li>复用：应用层素有的应用进程都可以通过传输层再传输到网络层<br />分用：传输层从网络层收到数据后交付指明的应用进程</li>
<li>逻辑端口/软件端口：端口是传输层的服务访问点 (SAP)，标识主机中的应用进程<br />端口是有本地意义，不同计算机的相同端口没有联系</li>
<li>端口号长度为16位，共65536个<br />服务端使用的端口号<br />&emsp;熟知端口号：给TCP/IP最重要的一些应用程序，让所有用户都知道，$0\sim1023$<br />&emsp;登记端口号：为没有熟知端口号的应用程序使用，$1024\sim49151$<br />客户端使用的端口号：仅在客户进程运行时才动态选择，$49152\sim65535$</li>
<li>常用熟知端口号<br />FTP数据传输进程：20<br />FTP控制进程：21<br />TELNET：23<br />SMTP：25<br />DNS：53<br />TFTP：69<br />HTTP：80<br />POP：110<br />SNMP：161<br />HTTPS：443</li>
<li>网络中采用发送方和接收方的套接字组合来识别端口，套接字唯一标识了网络中的一个主机和它上面的进程。$套接字Socket=(主机IP地址,端口号)$</li>
</ol>
<h1 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h1><ol>
<li>UDP只在IP数据报服务之上增加了复用分用和差错检测功能</li>
<li>主要特点<br />无连接，减少开销和发送数据之前的时延<br />使用最大努力交付，不保证可靠交付<br />面向报文，适合一次性传输少量数据的网络应用<br />无拥塞控制，适合很多实时应用<br />首部开销小，只用8B<br />应用层给UDP多长的报文，UDP旧照样发送，一次发一个完整报文</li>
<li>UDP首部格式<br /><img src="/img/09.传输层01.png" width="25%">UDP长度：UDP用户数据报整个长度<br />UDP检验和：检测整个UDP数据报是否有错，有错则丢弃</li>
<li>分用时，找不到对应的端口号，就丢弃报文，并给发送法发送ICMP端口不可达差错报告报文</li>
<li>发送端生成校验和<br />在首部的前面添加伪IP首部，包括4B的源IP地址、4B的目的IP地址、1B的0、1B的协议 (UDP代码为17)、2B的UDP长度<br />在校验和字段填充全0<br />用全0填充数据部分，使得数据部分的总长度为4B的整数倍<br />每2B为一组，把每一组逐个相加<br />&emsp;方法一：二进制直接计算，每次只加两个行，如果最高位有进位，就加在末位上<br />&emsp;方法二：换算成4位十六进制，所有数一起加。先算最右边一列，取其个位数，其余作为进位与最右边第二列相加，以此类推。最高位的进位最后加在最低位上，再转化为8位二进制数<br />把相加的结果取反，填入检验和字段<br />去掉伪首部即可发送</li>
<li>接收端验证校验和<br />填上和发送端一样的伪首部，并在数据末位补0<br />每2B为一组，和发送端一样求和<br />若结果为全1，则无差错，否则丢弃数据报，或交给应用层附上差错警告</li>
</ol>
<h1 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h1><ol>
<li>主要特点<br />面向连接 (虚连接)的传输层协议<br />每一条TCP连接只能有两个端点，每一条TCP连接只能是点对点的<br />提供可靠交付的服务，无差错、不丢失、不重复、按序到达<br />提供全双工通信，包含发送缓存和接收缓存<br />面向字节流，把应用程序交下来的数据看成仅仅是一连串的无结构的字节流</li>
<li>发送缓存收留准备发送的数据、已发送但尚未收到确认的数据<br />接收缓存收留按序到达但尚未被应用程序读取的数据、不按序到达的数据</li>
<li>TCP报文段首部格式<br /><img src="/img/09.传输层02.png" width="50%">TCP报文段的固定首部为20B<br />序号：本报文段传送的数据的第一个字节的序号<br />确认号：期望收到对方下一个报文段的第一个数据字节的序号。若确认号为$N$，则证明到序号$N-1$为止的所有数据都以正确收到<br />数据偏移 (首部长度)：TCP报文段的数据起始处距离TCP报文段的起始处有多远，单位是4B<br />紧急位URG：$URG=1$时，表示此报文段有紧急数据，应尽快传送，不用在缓存中排队<br />确认位ACK：$ACK=1$时，确认号有效，在连接建立后所有传送的报文段都必须把ACK置为1<br />推送位PSH：$PSH=1$时，接收方尽快交付接收应用进程，不再等到缓存填满再向上交付<br />复位RST：$RST=1$时，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立传输连接<br />同步位SYN：$SYN=1$时，表明时一个连接请求/连接接受报文<br />终止位FIN：$FIN=1$时，表明报文段发送方数据已发送完，要求释放连接<br />窗口：发送本报文段的一方的接收窗口，现在允许对方发送的数据量<br />检验和：同UDP检验和<br />紧急指针：当$URG=1$时，指出本报文段中紧急数据的字节数<br />选项：最大报文段长度MSS、窗口扩大、时间戳、选择确认等</li>
</ol>
<h2 id="TCP连接"><a href="#TCP连接" class="headerlink" title="TCP连接"></a>TCP连接</h2><ol>
<li>TCP连接采用C/S方式，主动发起连接建立的应用进程叫客户，被动等待连接建立的应用进程叫服务器</li>
<li>TCP连接建立过程<br />客户端发送连接请求报文段，无应用层数据，$SYN=1,seq=x$，$x$随机<br />服务器端为该TCP连接分配缓存和变量，并向客户端返回确认报文段啊，允许连接，无应用层数据，$SYN=1,ACK=1,seq=y,ack=x+1$，$y$随机<br />客户端为该TCP连接分配缓存和变量，并向服务器端返回确认的确认报文段，可以携带数据，$SYN=0,ACK=1,seq=x+1,ack=y+1$</li>
<li>SYN洪泛攻击：攻击者向服务器发送连接请求报文，当服务器返回ACK后，不对其再进行确认，那个TCP就会处于挂起状态，即半连接状态，服务器不断重复发送ACK给攻击者。若攻击者大量发送TCP连接，每一个都无法完成三次握手，就会耗费大量的服务器资源，最后可能死机</li>
<li>TCP连接释放<br />客户端发送连接释放报文段，停止发送数据，主动关闭TCP连接。$FIN=1,seq=u$<br />服务器端回送一个确认报文段，客户到服务器这个方向的连接就释放了，处于半关闭状态。$ACK=1,seq=v,ack=u+1$<br />服务器端发完数据，就发出连接释放报文段，主动关闭TCP连接。$FIN=1,ACK=1,seq=w,ack=u+1$<br />客户端回送一个确认报文段，$ACK=1,seq=u+1,ack=w+1$。再等到时间等待计时器设置的2MSL (最大报文段寿命)后，连接彻底关闭<br />等待2MSL是为了防止确认报文段丢失，导致连接不能彻底关闭</li>
</ol>
<h2 id="TCP可靠传输"><a href="#TCP可靠传输" class="headerlink" title="TCP可靠传输"></a>TCP可靠传输</h2><ol>
<li>TCP实现可靠传输的手段：校验、序号、确认、重传</li>
<li>TCP一个字节占一个序号，使用累计确认</li>
<li>超时重传：TCP采用自适应释放，动态改变重传时间RTTs (加权平均往返时间)</li>
<li>快速重传：每当比期望序号大的失序报文到达时，发送一个冗余ACK，指明下一个期待字节的序号，发送方收到3个对于一个报文段的冗余ACK时，就认为报文段丢失，重传该报文段</li>
</ol>
<h2 id="TCP流量控制和拥塞控制"><a href="#TCP流量控制和拥塞控制" class="headerlink" title="TCP流量控制和拥塞控制"></a>TCP流量控制和拥塞控制</h2><ol>
<li>流量控制：让发送方慢点，要让接收方来得及截搜。TCP利用<a href="http://www.laughingtree.cn/2020/12/22/05-数据链路层的功能/#流量控制和可靠传输" target="_blank" rel="noopener">滑动窗口机制</a>实现流量传输。</li>
<li>接收方可以根据自己接收缓存的大小，动态调整发送方的发送窗口大小，即接收窗口rwnd，通过确认报文段的窗口字段发送</li>
<li>发送方的发送窗口为接收方的接收窗口rwnd和拥塞窗口cwnd的最小值</li>
<li>TCP为每一个连接舍友一个持续计时器，只要TCP连接的一方收到对方的零窗口通知，就启动持续计时器。若一持续计时器的时间到期，就发送一个零窗口探测报文段。接收方收到探测报文段时就给出现在的窗口值。若窗口仍是0，发送方就重新设置持续计时器</li>
<li>拥塞控制：防止过多的数据注入到网络中</li>
<li>慢开始和拥塞避免算法<br />发送方一开始$cwnd=1$<br />每发送一批数据<br />慢开始：如果一个RTT内收到了它们的确认，$cwnd=\left\{\begin{matrix}min\{2*cwnd,ssthresh\}&amp;cwnd&lt; ssthresh\\cwnd+1&amp;cwnd≥ssthresh\end{matrix}\right.$，并发送下一批数据<br />拥塞避免：如果一个RTT内没有收到它们的确认，$cwnd=1$，且$ssthresh=\displaystyle\frac{cwnd}{2}$</li>
<li>快重传和快恢复算法，开端和慢开始一样，从1开始，逐渐翻倍，达到ssthresh就逐渐+1<br />快重传：如果连续收到三个冗余ACK，直接重传<br />快恢复：重传前，$cwnd=ssthresh=\displaystyle\frac{cwnd}2$</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2021/02/07/08-%E7%BD%91%E7%BB%9C%E5%B1%82%E4%B9%8B%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/07/08-%E7%BD%91%E7%BB%9C%E5%B1%82%E4%B9%8B%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9/" class="post-title-link" itemprop="url">08. 网络层之路由选择</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-07 12:42:35" itemprop="dateCreated datePublished" datetime="2021-02-07T12:42:35+08:00">2021-02-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-02-08 21:38:36" itemprop="dateModified" datetime="2021-02-08T21:38:36+08:00">2021-02-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="路由算法及路由协议"><a href="#路由算法及路由协议" class="headerlink" title="路由算法及路由协议"></a>路由算法及路由协议</h1><ol>
<li>最佳路由：“最佳”只能是相对于某一种特定要求下得出的较为合理的选择</li>
<li>分类 <br />静态路由算法：管理员手工配置路由信息。简便、可靠，载负荷稳定、拓扑变化不大的网络中运行效果很好，广泛用于高度安全性的军事网络和较小的商业网络。路由更新慢，不适用大型网络<br />动态路由算法：路由器之间彼此交换信息，按照路由算法优化出路由表项。路由更新快，适用于大型网络，及时响应链路费用或网络拓扑变化。算法复杂，增加网络负担</li>
<li>动态路由算法的分类<br />全局性：链路状态路由算法OSPF，所有路由器掌握完整的网络拓扑和链路费用信息<br />分散性：距离向量路由算法RIP，路由器只掌握物理相邻的邻居及链路费用</li>
<li>自治系统AS：对外界隐藏的一组路由器和主机，他们中有个别代表整个系统与外界连接，让系统内的设备接入因特网<br />一个AS内的所有网络都属于一个行政单位管辖，自治系统内的所有设备都必须连通<br />自治系统内使用内部网关协议IGP，如RIP，OSPF；自治系统间使用外部网关协议EGP，如BGP</li>
</ol>
<h1 id="RIP协议及距离向量算法"><a href="#RIP协议及距离向量算法" class="headerlink" title="RIP协议及距离向量算法"></a>RIP协议及距离向量算法</h1><ol>
<li>RIP协议适用于小型自治系统</li>
<li>RIP基于距离向量，最大优点是简单。要求网络中的每一个路由器都维护从它自己到其他每一个目的网络的唯一最佳距离记录</li>
<li>RIP允许一条路由最多只能包含15个路由器，距离为16表示网络不可达</li>
<li>RIP协议仅和相邻路由器交换自己的路由表。每30s交换一次路由信息并更新路由表。若超过180s没收到相邻路由器的通告，则判断原相邻路由器不可达，并更新路由表，将其距离设为16</li>
<li>距离向量算法<br />&emsp;相邻路由器发来的RIP报文中的所有表项距离字段+1，下一跳字段的地址改为发来RIP报文的路由器<br />&emsp;若自身路由表中没有相应的目的网络，则把该表项填入路由表中<br />&emsp;若路由表中相应的目的网络的下一跳不是RIP报文的源路由器，则二者取小填入路由表<br />&emsp;若路由表中相应的目的网络的下一跳是RIP报文的源路由器，则直接替换原路由表中的项</li>
<li>RIP协议是应用层协议，使用UDP传送数据 (仅需和相邻路由器交换，误码率低)</li>
<li>RIP报文的首部是4字节，第一部分为命令，第二部分为版本，剩下的部分必为0</li>
<li>RIP报文的数据部分最多可以有25个表项，若超过25个路由，则分多个报文传递<br /><img src="/img/08.路由选择01.png" width="25%"></li>
<li>特点：当网络出现故障时，要经过比较长的时间，多次交换才能将信息传送到所有路由器，称为“慢收敛”<br />出现这个问题的原因是每次交换信息的时候所有路由都是一起发送的，当与故障网络 (不可达)相邻的网络将正确的信息发送出去时，也会收到来自其他网络错误的信息，并依据这个错误的信息修改自己的路由表。下一次交换的时候，相邻路由器发出的是正确的表项，本身发出错误的表项。不断循环，轮流保存正确的信息，保存错误的信息中的距离也会不断+1，知道达到16，成为正确的信息</li>
</ol>
<h1 id="OSPF协议"><a href="#OSPF协议" class="headerlink" title="OSPF协议"></a>OSPF协议</h1><ol>
<li>OSPF协议适用于大型自治系统，使用分布式的链路状态协议</li>
<li>OSPF协议使用洪泛法向自治系统内所有路由器发送信息。每一个路由器向所有相邻的路由器发送信息，每一个相邻路由器又将此信息发往其所有相邻路由器<br />发送的信息就是本路由器相邻所有路由器的链路状态，包括哪些路由器，链路的代价，费用、距离、时延、带宽等<br />只有当链路状态发生变化时，路由器才向所有路由器洪泛发送信息<br />最后，所有路由器都能建立一个链路状态数据库，全网拓扑图</li>
<li>链路状态路由算法<br />&emsp;每个路由器发现它的邻居结点的HELLO问候分组，并了解邻居节点的网络地址<br />&emsp;设置到它的每一个邻居的成本度量metric<br />&emsp;构造DD数据库描述分组，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息<br />&emsp;如果DD数据库描述分组中的摘要自己都有，则邻站不做处理<br />&emsp;如果没有或是有更新，则发送LSR链路状态请求分组，请求自己没有或是比自己新的信息<br />&emsp;收到邻站的LSR链路状态请求分组后，发送LSU链路状态更新分组<br />&emsp;更新完毕后，邻站返回一个LSAck链路状态确认分组</li>
<li>只有有一个路由器的链路状态发送变化，就洪泛发送LSU链路状态更新分组。更新完毕后，其他站返回LSAck链路状态确认分组。再使用Dijkstra算法依据自己的链路状态数据库构造到其他节点间的最短路径</li>
<li>OSPF将一个自治系统再划分成若干个更小的范围，叫做区域。每个区域都有一个32位的区域标志符，用点分十进制表示。一个区域内的路由器最好不超过200个</li>
<li>划分了区域后，就有区域内部路由器、区域边界路由器、自治系统边界路由器、主干路由器</li>
<li>OSPF由于要交换的信息量大，要使报文的长度尽量端，是传输层协议，直接用IP数据包传送</li>
<li>每隔30分钟，要刷新一次数据库中的链路状态</li>
<li>一个路由器的链路状态只涉及到相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。当互联网规模很大时，OSPF协议要比RIP协议好得多</li>
<li>OSFP不存在慢收敛问题</li>
</ol>
<h1 id="BGP协议"><a href="#BGP协议" class="headerlink" title="BGP协议"></a>BGP协议</h1><ol>
<li>每一个自治系统都有一个BGP发言人，只有BGP发言人之间可以交换信息。它们之间交换的是网络可达性的信息，即要到达某个网络所要经过的一系列自治系统。信息是以路径向量的形式交换</li>
<li>BGP协议只在发送变化时更新有变化的部分</li>
<li>当BGP发言人互相交换了网络可达性的信息后，各BGP发言人就根据所采用的策略从收到的路由信息中找出到达各自治系统的较好路由</li>
<li>BGP协议报文首部包括了16B的标记、2B的长度、1B的类型</li>
<li>一个BGP发言人要与其他BGP发邮件交换路由信息，就要先建立TCP连接，然后再此连接上交换BGP报文以建立BGP会话，利用BGP会话交换路由信息</li>
<li>BGP支持CIDR，因此BGP的路由表包括目的网络前缀、下一跳路由器、要达到该目的网络所要经过的各个自治系统序列</li>
<li>在BGP刚刚运行时，BGP的邻站时交换整个的BGP路由表，但以后只需要在发送变化时更新有变化的部分，以节省网络带宽和减少路由器的处理开销</li>
<li>BGP-4的四种报文<br />&emsp;OPEN报文：与相邻的另一个BGP发言人建立关系，并认证发送方<br />&emsp;UPDATE报文：通过新路径或撤销原路径<br />&emsp;KEEPALIVE报文：无UPDATE报文时，周期性证实邻站的连通性，也可以作为OPEN报文的确认报文<br />&emsp;NOTIFICATION报文：报告先前报文的差错，或用于关闭连接</li>
<li>BGP协议是应用层协议，是外部网关协议，要保证可靠传输，利用TCP协议传输</li>
<li>BGP协议中的选择的路径只是较好的路径，不一定是最佳路径</li>
</ol>
<h1 id="IP组播"><a href="#IP组播" class="headerlink" title="IP组播"></a>IP组播</h1><ol>
<li>IP数据报的三种传输方式<br />单播：发送到单个目的地，每一份单播报文都使用一个单播IP地址作为目的地址。是点对点传输<br />广播：发送到同一广播域或子网内的所有设备。是点对多点传输<br />组播 (多播)：发送给特定的某些设备。是点对多点传输</li>
<li>组播数据发送者只发送一次数据，借助组播路由协议为组播数据包建立组播分发树，被传递数据到达距离用户端尽可能近的节点才开始复制和分发</li>
<li>组播提高了数据传送效率，减少了主干网出现拥塞的可能性</li>
<li>组播组中的主机可以是在同一个物理网络，也可以来自不同的物理网络</li>
<li>组播路由器：运行组播协议的路由器</li>
<li>属于多播组的设备将被分配一个组播组IP地址。组播地址为D类地址，一个D类地址表示一个组播组。只能用作分组的目的地址，源地址总是单播地址。并非所有D类地址都可以作为组播地址</li>
<li>组播数据报是尽最大努力交付，不提供可靠交付，应用于UDP。对组播数据报不产生ICMP差错报告报文</li>
<li>组播IP地址有相应的组播MAC地址载本地网络中实际传输传送帧。组播MAC地址以十六进制值$01-00-5E$打头，余下的6个十六进制位是根据IP组播组地址的最后23位转换得到</li>
<li>收到多播数据报的主机，还要在网络层利用软件进行过滤，把不是本主机要接收的数据报丢弃</li>
</ol>
<h2 id="IGMP协议"><a href="#IGMP协议" class="headerlink" title="IGMP协议"></a>IGMP协议</h2><ol>
<li>IGMP协议让路由器知道本局域网上是否有主机 (的进程)参加或退出了某个组播组</li>
<li>IGMP协议使用IP数据报传递报文</li>
<li>某主机要加入组播组时，该主机向组播组的组播地址发送一个IGMP报文，声明自己要成为该组的成员<br />本地组播组路由器收到IGMP报文后，要利用组播路由选择协议把这组成员关系发给因特网上的其他组播路由器<br />本地组播路由器周期性探询本地局域网上的主机，以便知道这些主机是否还是组播组的成员<br />只要有一个主机对某个组响应，组播路由器就认为这个组是活跃的；若经过几次探询后没有一个主机响应，组播路由器就认为本网络上没有此组播组的主机，不再把这组的成员关系发给其他的组播路由器</li>
<li>组播路由器只知道所连接的局域网内有无组播组的成员</li>
</ol>
<h2 id="组播路由选择协议"><a href="#组播路由选择协议" class="headerlink" title="组播路由选择协议"></a>组播路由选择协议</h2><ol>
<li>组播路由选择协议的目的是找出以源主机为根节点的组播转发树。构造树可以避免数据在路由器之间兜圈子。不同多播组对应于不同的多播转发树；同一个多播组，对不同的源点也会有不同的多播转发树</li>
<li>组播路由选择协议常用三种算法：基于链路状态的路由选择、基于距离-向量的路由选择、协议无关的组播 (稀疏/密集)</li>
</ol>
<h1 id="移动IP"><a href="#移动IP" class="headerlink" title="移动IP"></a>移动IP</h1><ol>
<li>移动IP技术：移动结点以固定的网络IP地址，实现跨越不同网段的漫游功能，并保证了基于网络IP的网络权限在漫游过程中不发生任何改变</li>
<li>移动结点：具有永久IP地址的移动设备<br />归属网络：移动结点的IP地址归属的网络<br />归属代理 (本地代理)：在归属网络中代表移动结点执行移动管理功能的实体<br />永久地址 (归属地址 / 主地址)：移动站点在归属网络中的原始地址<br />外部代理 (外地代理)：在外部网络中帮助移动结点完成移动管理功能的实体<br />转交地址 (辅地址)：外部代理的地址或动态配置的地址</li>
<li>移动设备刚进入外部网络：<br />&emsp;通过外部代理广播报文获得外部代理的转交地址<br />&emsp;移动结点通过外部代理发送注册报文给归属代理，包含永久地址和转交地址<br />&emsp;归属代理接受请求，并将移动节点的永久地址和转交地址绑定，并返回注册响应报文<br />&emsp;外部代理接受支持响应，并转发给移动结点<br />&emsp;之后每次通信，到达归属代理的数据报会以隧道方式发给转发地址</li>
<li>移动设备进入另一个网络：<br />&emsp;载新外部代理登记一个转交地址<br />&emsp;新外部代理给本地代理发送新的转交地址，覆盖旧的地址</li>
<li>移动设备回到归属网络：<br />&emsp;向本地代理注销转交地址<br />&emsp;按原始方式通信</li>
</ol>
<h1 id="网络层设备"><a href="#网络层设备" class="headerlink" title="网络层设备"></a>网络层设备</h1><ol>
<li>路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组</li>
<li>路由选择处理机：根据所选定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断地更新和维护路由表</li>
<li>交换结构：若收到RIP/OSPF分组，则把分组送往路由选择处理机；若收到数据分组，则查找转发表并转发</li>
<li>输入端口：从线路接收分组，经过物理层处理、数据链路层处理、网络层处理，进入交换结构<br />在网络层处理时有分组排队和查表转发，产生时延<br />输入端口中的查找和转发功能在路由器的交换功能中最重要</li>
<li>输出端口：从交换结构，经过网络层处理、数据链路层处理、物理层处理，向链路发送分组<br />在网络层处理时有分组排队和缓存管理，产生时延<br />若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，使后面再进入队列的分组由于没有存储空间而只能被丢弃<br />路由器中输入或输出队列产生溢出是造成分组丢失的重要原因</li>
<li>物理层设备既不能隔离冲突域，也不能隔离广播域；不能互联两个网络层不同的网段<br />链路层设备只能隔离冲突域，不能隔离广播域；可以互联两个网络层和链路层不同的网段<br />网络层设备既能隔离冲突域，也能隔离广播域；可以互联两个不同网络层协议的网段</li>
<li>路由表根据路由选择算法得出来的，主要用途是路由选择，总用软件实现</li>
<li>转发表由路由表得来，可以用软件实现，也可以用特殊的硬件来实现。转发表必须包含完成转发功能所必需的信息，包括要到达的目的网络到输出端口和某些MAC地址信息的映射</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2021/02/04/07-%E7%BD%91%E7%BB%9C%E5%B1%82%E4%B9%8B%E8%BD%AC%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/04/07-%E7%BD%91%E7%BB%9C%E5%B1%82%E4%B9%8B%E8%BD%AC%E5%8F%91/" class="post-title-link" itemprop="url">07. 网络层之转发</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-04 15:09:14" itemprop="dateCreated datePublished" datetime="2021-02-04T15:09:14+08:00">2021-02-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-02-07 12:41:31" itemprop="dateModified" datetime="2021-02-07T12:41:31+08:00">2021-02-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="网络层功能"><a href="#网络层功能" class="headerlink" title="网络层功能"></a>网络层功能</h1><ol>
<li>网络层的主要任务是把分组从源端传送到目的端，为分组交换网上不同的主机提供通信服务</li>
<li>网络层的传输单位是数据包</li>
<li>主要实现三个功能：路由选择域分组转发、异构网络互联、拥塞控制</li>
<li>拥塞：所有结点都来不及接受分组，而要丢弃大量分组的状态</li>
</ol>
<h1 id="IP数据报"><a href="#IP数据报" class="headerlink" title="IP数据报"></a>IP数据报</h1><ol>
<li>IP数据报分为首部和数据部分，首部又分为固定部分20B和可变部分</li>
<li>IP数据报格式<br /><img src="/img/07.网络层之转发01.png" width="50%">版本：指明是IPv4还是IPv6<br />首部长度：单位是4B，表示固定部分+可变部分的长度<br />区分服务：指示期望获得哪种类型的服务<br />总长度：首部长度+数据部分长度，单位是1B<br />生存时间TTL：IP分组的保质期，经过一个路由器-1，变成0则丢弃。防止无法到达的数据报无限制地在线路上传播<br />协议：数据部分的协议。ICMP为1， IGMP为2，TCP为6，EGP为8，IGP为9，UDP为17，IPv6为41，ESP为50，OSPF为89<br />首部检验和：只检验首部，不管数据部分<br />可选字段：0～40B，用来支持排错、测量以及安全等措施<br />填充：用0把首部补足为4B的整数倍</li>
<li>IP数据报分片：如果所传送的数据报长度超过链路的MTU值，就需要把数据报分为多个片来传输<br />同一个数据报的不同分片的IP数据报中的标识位相同<br />IP数据报的标志位三位中只有后两位有意义<br />&emsp;中间位DF (Don’t Fragment)，$DF=1$禁止分片，$DF=0$允许分片<br />&emsp;最低位MF (More Fragment)，$MF=1$后面还有分片，$MF=0$这是最后一个分片<br />片偏移表示这个分组的第一个字节在原完整数据报中的位置，单位是8B<br />由片偏移可以得知，除了最后一个分片，每个分片的长度一定是8B的整数倍</li>
<li>MTU的值包括了首部的大小</li>
</ol>
<h1 id="IPv4地址"><a href="#IPv4地址" class="headerlink" title="IPv4地址"></a>IPv4地址</h1><ol>
<li>IPv4地址是全世界唯一的32位标识符，标识路由器主机的接口</li>
<li>地址分为两部分，网络号和主机号，常用点分十进制表示</li>
</ol>
<h2 id="分类的IP地址"><a href="#分类的IP地址" class="headerlink" title="分类的IP地址"></a>分类的IP地址</h2><ol>
<li>A类：最高一位为0，网络号占1B，主机号占3B，第一个十进制为$1\sim 126$<br />B类：最高两位为10，网络号占2B，主机号占2B，第一个十进制 为$128\sim 191$<br />C类：最高三位为110，网络号占3B，主机号占1B，第一个十进制为    $192\sim223$<br />D类：最高四位为1110，是多播地址<br />E类：最高四位为1111，是保留地址</li>
<li>特殊IP地址<br />&emsp;网络号全0，主机号特定值：表示本网内某个特定主机。可以作为源地址，不可以作为目的地址<br />&emsp;网络号全0，主机号全0：本网范围内表示主机，路由表中用于表示默认路由 (表示整个因特网)。可以作为源地址，不能作为目的地址<br />&emsp;网络号特定值，主机号全0：表示网络地址，是一个特定的网络，不可以做源地址，也不可以做目的地址<br />&emsp;网络号全1，主机号全1：表示本网广播地址，路由器不会转发。不可以作为源地址，可以作为目的地址<br />&emsp;网络号特定值，主机号全1：直接广播地址，对特定网络上的所有主机进行广播，不可以做源地址，可以做目的地址<br />&emsp;网络号127，主机号任何数 (非全0全1)：环回地址，用于本地软件环回测试，可以做源地址，也可以做目的地址</li>
<li>私有IP地址：路由器对目的地址是私有IP地址的数据报一律不转发<br />&emsp;A类：地址范围$10.0.0.0\sim10.255.255.255$，有1个网段<br />&emsp;B类：地址范围$172.16.0.0\sim 172.31.255.255$，有16个网段<br />&emsp;C类：地址范围$192.168.0.0\sim 192.168.255.255$，有256个网段</li>
<li>A类网络最大可用网络数为$2^7-2$，网络号不能是全0或全1 (127)。第一个可用网络号为1，最后一个可用网络号为126。每个网络中的最大主机数为$2^{24}-2$，主机号不能为全0或全1<br />B类网络最大可用网络数为$2^{14}-1$，网络号不能是全0。第一个可用网络号为$128.1$，最后一个可用网络号为$191.255$。每个网络中的最大主机数为$2^{16}-2$<br />C类网络最大可用网络数为$2^{21}-1$第一个可用网络号为$192.0.1$，最后一个可用网络号为$223.255.255$。每个网络中的最大主机数为$2^8-2$</li>
</ol>
<h2 id="网络地址转换"><a href="#网络地址转换" class="headerlink" title="网络地址转换"></a>网络地址转换</h2><ol>
<li>网络地址转换 (NAT, Network Address Translation)：在专用网连接到因特网的路由器上安装NAT软件</li>
<li>安装了NAT软件的路由器叫NAT路由器，它至少有一个有效的外部全球IP地址</li>
<li>NAT路由器中维护一个NAT转换表，其把LAN端的端口一一映射为WAN端的端口。每一个WAN端和LAN端表项包含一个IP地址以及一个端口号。端口号必须唯一，一个IP可以对应多个端口号</li>
<li>当外部因特网中的数据报发到NAT路由器上时，路由器在NAT转换表中WAN端查找相应表项，只有IP地址和端口号都一样才可以将目的地址转换为对应的LAN端上<br />当专用网内的数据报发送到NAT路由器上时，路由器在NAT转换表中LAN端查找相应表项，并将源地址转换为对应的WAN端表项</li>
</ol>
<h2 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h2><ol>
<li>分类IP地址的缺点：IP地址空间的利用率有时很低，两级 (网络号+主机号)IP地址不够灵活</li>
<li>划分子网：把主机号的前几位作为子网号，形成一个三级地址，即网络号+子网号+主机号</li>
<li>划分子网后，对外仍表现为一个网络，外部的网络看不见内部的子网划分</li>
<li>由于主机号不能是全0或全1，所以主机号至少要两位</li>
<li>子网掩码：网络号与子网号对应的位全为1，主机号对应的位全为0</li>
<li>判断一个主机的IP地址是不是属于一个子网：子网掩码与IP地址逐位相与，如果结果是子网号，就是属于这个子网，否则就不属于子网</li>
<li>路由表中要包含目的子网地址、目的子网掩码、下一跳地址</li>
<li>路由器转发分组算法：<br />&emsp;提取目的IP地址<br />&emsp;查看IP地址是否属于一个子网，是则可以直接交付<br />&emsp;查找IP地址是否是特定主机路由 (特殊的IP地址)<br />&emsp;检测路由表中有无路径<br />&emsp;查看默认路由0.0.0.0中是否有上述事件为真<br />&emsp;TTL超时，丢弃报文，报告转发分组出错</li>
</ol>
<h2 id="无分类编制CIDR"><a href="#无分类编制CIDR" class="headerlink" title="无分类编制CIDR"></a>无分类编制CIDR</h2><ol>
<li>无分类编制消除了传统的A类、B类和C类地址以及划分子网的概念。在IP地址后加上“/”，然后写上网络前缀 (可以任意长度)的位数</li>
<li>子网掩码即为网络前缀位的1加上主机号位的0</li>
<li>构成超网 / 路由聚合：将多个子网聚合成一个较大的子网。实施时只需要缩短网络前缀，所有网络地址取交集</li>
<li>使用CIDR时，查找路由表可能得到几个匹配结果，应选择具有最长网络前缀的路由。前缀越长，地址块越小，路由越具体</li>
</ol>
<h1 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h1><ol>
<li>在数据链路层要填写目的主机的MAC地址，ARP协议就是完成主机或路由器IP地址到MAC地址的映射</li>
<li>ARP协议首先检查ARP高速缓存，如果有对应表项则写入MAC帧<br />如果高速缓存中没有，则用MAC地址为FF-FF-FF-FF-FF-FF的帧封装并广播ARP请求分组，同一局域网内的所有主机都可以收到该请求<br />目的主机收到请求后会向源主机单播一个ARP响应分组，源主机收到后将此映射写入ARP缓存</li>
<li>主机要与本网络的另一台主机通信，ARP协议找的是另一台主机的MAC地址<br />主机要与另一网络的主机通信，ARP协议找的是本网络上一个路由器 (网关)的MAC地址<br />路由器要与本网络的主机通信，ARP协议找的是主机的MAC地址<br />路由器要与另一网络的主机通信，ARP协议找的是本网络上一个路由器 (网关)的MAC地址</li>
<li>ARP协议自动进行，对用户透明</li>
</ol>
<h1 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h1><ol>
<li>DHCP协议是应用层协议，使用C/S方式，Client和Server通过广播方式进行交互，基于UDP</li>
<li>DHCP协议提供即插即用的联网机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器名称与IP地址，允许地址重用，支持移动用户加入网络，支持在用地址续租</li>
<li>主机先广播一个DHCP发现报文，试图找到网络中的服务器，服务器获得一个IP地址<br />DHCP服务器广播DHCP提供报文，拟分配给主机一个IP地址及相关配置，先到先得<br />主机广播DHCP请求报文，主机向服务器请求提供IP地址<br />DHCP服务器广播DHCP确认报文，正式将IP地址分配给主机</li>
<li>在第二阶段广播DHCP提供报文时资源还未分配，因为可能有多个服务器会向主机提供资源，只有在收到主机的DHCP请求报文时，才能确定主机会使用自己的资源，将资源分配给主机。没有收到DHCP请求报文但发送了DHCP提供报文的服务器就将资源收回</li>
</ol>
<h1 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h1><ol>
<li>为了更有效地转发IP数据报和提高交付成功的机会，设计了ICMP协议</li>
<li>ICMP报文格式<br /><img src="/img/07.网络层之转发02.png" width="25%"></li>
<li>ICMP协议也是应用层协议，报文利用IP数据报传送</li>
<li>有两类ICMP报文：ICMP差错报文、ICMP询问报文</li>
<li>5种ICMP差错报告报文<br />&emsp;终点不可达报文：路由器或主机不能交付数据报时就向源点发送<br />&emsp;源点抑制报文：路由器或主机由于拥塞而丢弃数据报时就想源点发送<br />&emsp;路由器发送的时间超过报文：路由器收到$TTL=0$的数据报时，丢弃该数据报，并向源点发送时间超过报文<br />&emsp;终点发送的时间超过报文：终点在预定时间内不能收到一个数据报的全部数据报片时，丢弃所有已收到的数据报片，向源点发送时间超过报文<br />&emsp;参数问题报文：路由器或目的主机收到的数据报的首部中有字段的值不正确，就丢弃该数据报，向源点发送参数问题报文<br />&emsp;改变路由 (重定向)报文：路由器把改变路由报文发送给主机，让主机知道下次应该将数据报发送给另外的路由器</li>
<li>ICMP差错报告报文数据字段：第$9\sim12$字节装载收到的IP数据报的首部，最后的数据部分装载IP数据报的数据字段的前8个字节</li>
<li>不发送ICMP差错报告报文的情况<br />&emsp;ICMP差错报告报文<br />&emsp;第一个分片的数据报片的所有后续数据报片<br />&emsp;具有组播地址的数据报<br />&emsp;具有特殊地址 (如127.0.0.0或0.0.0.0)的数据报</li>
<li>ICMP询问报文<br />&emsp;回送请求和回答报文：主机或路由器向特定目的主机发出询问，收到报文的主机必须给源点发送ICMP回送回答报文，测试目的站是否可达及了解其相关状态<br />&emsp;时间戳请求和回答报文：请某个主机或路由器回答当前的日期和时间。用来进行时钟同步和测量时间</li>
<li>ICMP的应用<br />&emsp;PING：测试两个主机的连通性，使用ICMP回送请求和回答报文<br />&emsp;Traceroute：连续发送多个不同TTL的报文，跟踪一个分组从源点到终点的路径，使用ICMP时间超过差错报告报文</li>
</ol>
<h1 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h1><ol>
<li>IPv6从根本上解决地址耗尽问题</li>
<li>IPv6的数据报固定40B的基本首部，路由器处不能分片。除了基本首部，还有不定长的扩展首部，与数据部分一起放在有效载荷中</li>
<li>IPv6数据报格式<br /><img src="/img/07.网络层之转发03.png" width="50%">流：互联网络上从特定源点到特定终点的一系列数据报<br />流标签：类似IPv4数据报的标识，标识一个同属一个流的多个数据报<br />下一个首部：标识下一个扩展首部或上层协议首部 (如果没有扩展首部)<br />跳数限制：相当于IPv4中的TTL</li>
<li>IPv6与IPv4对比<br />&emsp;地址从32位扩大到 64位<br />&emsp;移除校验和字段，减少处理时间<br />&emsp;将可选字段移出首部，变为扩展字段，更为灵活。路由器通常不对扩展首部检查，提高路由器处理效率<br />&emsp;自支持即插即用，自动配置，无需DHCP协议<br />&emsp;首部长度必须是8B的整数倍<br />&emsp;只能在主机处分片，IPv4还可以在路由器处分片<br />&emsp;ICMPv6附加报文类型：分组过大<br />&emsp;支持资源预分配，支持实施视像等要求，保证一定的带宽和时延的应用<br />&emsp;取消协议字段，改成下一首部字段<br />&emsp;取消总长度字段，该用有效载荷长度字段<br />&emsp;取消服务类型字段</li>
<li>地址表示<br />&emsp;一般采用冒号十六进制记法，每4位十六进制一组，用冒号分隔开<br />&emsp;如果一组4位十六进制全部是0，可以只写一个0，不必写4个<br />&emsp;如果连续多组的4位十六进制都是0，则可以用两个连续的冒号表示，在一个地址中只能用一次</li>
<li>基本地址类型<br />&emsp;单播地址：一对一通信，可做源地址和目的地址<br />&emsp;多播地址：一对多通信，可做目的地址<br />&emsp;任播地址：一对多个中的一个通信，可做目的地址</li>
<li>IPv6向IPv4过渡的策略<br />&emsp;双栈协议：一台设备同时启用IPv4协议栈和IPv6协议栈。如果是路由器，不同接口分别配置IPv4和IPv6地址；如果是计算机，同时有IPv4和IPv6地址<br />&emsp;隧道技术：隧道协议将其他协议的数据帧或包重新封装后通过隧道发送</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2021/01/27/06-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/27/06-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">06. 数据链路层的应用</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-27 21:57:20" itemprop="dateCreated datePublished" datetime="2021-01-27T21:57:20+08:00">2021-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-02-08 20:30:40" itemprop="dateModified" datetime="2021-02-08T20:30:40+08:00">2021-02-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="介质访问控制"><a href="#介质访问控制" class="headerlink" title="介质访问控制"></a>介质访问控制</h1><ol>
<li>介质访问控制：MAC (media access control)</li>
<li>点对点链路：两个相邻节点通过一个链路相连，没有第三者。应用于PPP协议，常用于广域网<br />广播式链路：所有主机共享通信介质。应用于早期的总线以太网、无线局域网，常用于局域网。典型拓扑结构有总线型、星型 (逻辑总线型)</li>
<li>介质访问控制的目的是使得两对节点之间的通信不会发生相互干扰</li>
<li>介质访问控制的两种方法<br />&emsp;静态划分信道：信道划分介质访问控制<br />&emsp;动态分配信道：轮询介质访问控制、随机访问介质访问控制</li>
<li>动态分配信道是动态媒体接入控制/多点接入，随机访问介质访问控制所有用户可以随机发送信息，发送信息时占全部带宽</li>
</ol>
<h2 id="信道划分介质访问控制"><a href="#信道划分介质访问控制" class="headerlink" title="信道划分介质访问控制"></a>信道划分介质访问控制</h2><ol>
<li>频分多路复用FDM：所有用户在同时占用不同的频率带宽资源<br />充分利用传输介质带宽，系统效率高，技术成熟，实现容易<br />频分多路复用属于并行通信</li>
<li>时分多路复用TDM：将时间划分为一段段等长的时分复用帧 (TDM帧)，再将TMD帧划分成多个时隙，每一个用户轮流占用TDM帧内的一个时隙，每一个时隙只有一个用户发送<br />时隙个数按连接在集中器上的用户数划分<br />如果一个用户暂时没有数据要发送，则属于他的时隙内没有数据会被发送<br />时分多路复用属于并发通信</li>
<li>统计时分复用STDM：每一个STDM帧中的时隙个数小于连接在集中器上的用户数。各用户有了数据就随时发往集中器的输入缓存，然后集中器按顺序依次扫描输入缓存，把缓存中的输入数据放入STDM帧中，一个STDM帧满了就发出<br />每个用户单次发送都有一个最大容量，即STDM帧的时隙大小，超出了最大容量就让别人先发，下一轮再继续发送<br />STDM帧不是固定分配时隙，是按需动态分配</li>
<li>波分多路复用WDM：再一根光纤中传输多种不同波长的光信号，各路光信号互不干扰，再用波长分解器将各路波长分解出来</li>
<li>码分多路复用CDM：常用码分多址CDMA<br />芯片序列：用一个字节表示一个比特1，这个字节就是芯片序列。发送1时发送芯片序列，发送0时发送芯片序列的反码<br />通常把0写成-1，要求多个站点的芯片序列相互正交<br />两个向量到公共信道上，线性相加；在数据终点，合并的数据和源站规格化内积</li>
</ol>
<h2 id="随机访问介质访问控制"><a href="#随机访问介质访问控制" class="headerlink" title="随机访问介质访问控制"></a>随机访问介质访问控制</h2><h3 id="ALOHA协议"><a href="#ALOHA协议" class="headerlink" title="ALOHA协议"></a>ALOHA协议</h3><ol>
<li>纯ALOHA协议：不监听信道，不按时间槽发送，随机重发。想法就发<br />冲突检测：发送方没有收到接收方的确认就认定为冲突<br />冲突解决：超时后等一随机时间再重传</li>
<li>时隙ALOHA协议：把时间分成若干个相同的时间片，所有用户在时间片开始时刻同步接入网络信道，若发生冲突，则必须等到下一个时间片开始时刻再发送</li>
<li>纯ALOHA比时隙ALOHA吞吐量更低，效率更低</li>
<li>纯ALOHA想发就发，时隙ALOHA只有在时间片段开始时才能发</li>
</ol>
<h3 id="CSMA协议"><a href="#CSMA协议" class="headerlink" title="CSMA协议"></a>CSMA协议</h3><ol>
<li>CS (carrier sense)：载波监听，每一个站发送数据前检测一下总线上是否有其他计算机在发送数据</li>
<li>MA (multiple access)：多点接入，多个计算机以多点接入的方式连接在一根总线上</li>
<li>冲突检测：多个站点同时发送数据，总线上信号电压摆动值增大，超过一个门限值时，表示发生碰撞，发生冲突</li>
<li>1-坚持CSMA：监听到信号忙后坚持监听，检测到信道空闲直接传输<br />冲突解决：等待一个随机长的时间再监听<br />优点：只要媒体空闲，马上发送，避免媒体利用率损失<br />缺点：假如有两个以上的站点有数据发送，冲突不可避免</li>
<li>非坚持CSMA：监听到信道忙就等待一个随机时间之后再监听，检测到信道空闲就直接传输<br />冲突解决同1-坚持<br />优点：采用随机的重发延迟时间可以减少冲突发送的可能性<br />缺点：可能存在大家都在延迟等待过程中，使得媒体仍可能处于空闲状态，媒体使用率降低</li>
<li>p-坚持CSMA：监听到信道忙就坚持监听，检测到信道空闲，以p概率直接传输，1-p概率等到下一个时间槽再传输<br />冲突解决同1-坚持<br />优点：既能像非坚持算法一样减少冲突，又能像1-坚持那样减少媒体空闲时间<br />缺点：发生冲突后还坚持把数据帧发送完，造成浪费<br />当$p=1$时，就是1-坚持CSMA算法</li>
</ol>
<h3 id="CSMA-CD协议"><a href="#CSMA-CD协议" class="headerlink" title="CSMA/CD协议"></a>CSMA/CD协议</h3><ol>
<li>CD (collision detection)：碰撞检测，适配器边发送数据，边检测信道是否有冲突，当检测到冲突时停止发送数据</li>
<li>设单程端到端传播时延为$\tau$， 当两个站点发送的数据交汇时发送冲突，当冲突的数据被发送方收到时就检测到冲突<br />检测用时为$2\times(冲突发生时间-发送的时间)$，则检测用时为$[0,2\tau]$<br />检测用时最久的情况：发送的数据即将到另一个站点时才发生冲突<br />检测用时最短的情况：发送的数据刚刚发送出去就发生冲突</li>
<li>只要过了$2\tau$还没检测到碰撞，则说明肯定没有发送碰撞</li>
<li>二进制指数退避算法确定重传时机<br />&emsp;确定基本退避 (推迟)时间为争用期$2\tau$<br />&emsp;定义参数$k=min(重传次数, 10)$<br />&emsp;从离散的整数集合$[0,1,\dots,2^k-2,2^k-1]$中随机选取一个数$r$，重传所需要的退避时间即为$2r\tau$<br />&emsp;当重传$16$次仍不能成功，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报告出错</li>
<li>因为检测到冲突后会停止发送数据，为了便于确定是否是有效帧，规定$最小帧长≥2\tau\times数据传输速率$。凡是小于最小帧长的都是无效帧</li>
</ol>
<h3 id="CSMA-CA协议"><a href="#CSMA-CA协议" class="headerlink" title="CSMA/CA协议"></a>CSMA/CA协议</h3><ol>
<li>无线局域网中无法做到全面检测碰撞，可能会有隐蔽站存在，所以需要新的协议</li>
<li>CA：collision avoid</li>
<li>发送数据前先检测信道是否空闲<br />空闲则发出RTS (request to send)，RTS包括发射端的地址、接收端的地址、下一份数据将持续发送的时间；信道忙则等待<br />接收端收到RTS后，响应CTS (clear to send)<br />发送端收到CTS后，开始发送数据帧，同时预约信道，告知其他站点自己要传多节的数据<br />接收端收到数据帧后检验数据是否正确，正确则响应ACK帧<br />发送方收到ACK帧就可以进行下一个数据帧的发送，若没有则一致重传，直到对定重传次数为止。也是采用二进制指数退避算法</li>
<li>如果收到了多个RTS帧，则选择其中的一个站点发送CTS帧</li>
</ol>
<h3 id="CSMA-CD协议与CSMA-CA协议对比"><a href="#CSMA-CD协议与CSMA-CA协议对比" class="headerlink" title="CSMA/CD协议与CSMA/CA协议对比"></a>CSMA/CD协议与CSMA/CA协议对比</h3><ol>
<li>二者都是先进行监听，再发送数据的协议</li>
<li>二者出现冲突后都会进行有上限的重传，确定重传时机的算法都是二进制指数退避算法</li>
<li>传输介质不同：CSMA/CD协议用于总线型的以太网，CSMA/CA协议用于无线局域网</li>
<li>载波检测方式不同：CSMA/CD协议通过电缆中的电压变化来检测碰撞；CSMA/CA采用能量检测 (ED)、载波检测 (CS)和能量载波混合检测三种检测信道空闲的方式</li>
<li>CSMA/CD检测冲突，CSMA/CA避免冲突</li>
</ol>
<h2 id="轮询访问介质访问控制"><a href="#轮询访问介质访问控制" class="headerlink" title="轮询访问介质访问控制"></a>轮询访问介质访问控制</h2><ol>
<li>轮询协议：主节点轮流邀请从属结点发送数据<br />造成了轮询开销；当一个结点要发送数据时要等主结点邀请，造成等待延迟；存在单点故障问题</li>
<li>令牌传递协议：令牌在结点之间轮转，只有持有令牌的结点才能发送数据。如果一个结点不需要发送数据，就把令牌传给下一个结点<br />令牌：一个特殊格式的MAC控制帧，不含任何信息，用于控制信道，确保同一时刻只有一个结点独占信道<br />每个结点都可以在一定的时间内 (令牌持有时间)获得发送数据的权利，并不是无限制地持有令牌<br />造成了令牌开销；当一个结点要发送数据时要等令牌传递到自己手上，造成等待延迟；存在单点故障问题当一个结点要发送数据时要等主结点邀请，造成等待延迟；存在单点故障问题应用于令牌环网 (物理上时星型拓扑，逻辑上是环型拓扑)<br />常用于负载较重、通信量较大的网络中</li>
</ol>
<h2 id="MAC三种方法比较"><a href="#MAC三种方法比较" class="headerlink" title="MAC三种方法比较"></a>MAC三种方法比较</h2><ol>
<li>信道划分MAC协议：基于多路复用技术划分资源<br />当网络负载重时，共享信道效率高且公平<br />当网络负载轻时，每一个用户也只能使用自己分配到的一部分资源，共享信道效率低</li>
<li>随机访问MAC协议：用户根据意愿随机发送信息，发送信息时独占全部信道带宽<br />当网络负载重时：产生冲突开销<br />当网络负载轻时：共享信道效率高，单个用户可以利用全部的信道带宽</li>
<li>轮询访问MAC协议：既要不产生冲突，又要发送时占全部带宽</li>
</ol>
<h1 id="局域网"><a href="#局域网" class="headerlink" title="局域网"></a>局域网</h1><ol>
<li>局域网：LAN (Local Area Network)， 指在某一区域内由多台计算机互连组成的计算机组，使用广播信道</li>
<li>局域网只覆盖了物理层和数据链路层</li>
<li>特点<br />&emsp;覆盖的地理范围较小，只在一个相对独立的局部范围内互联<br />&emsp;使用专门铺设的传输介质进行联网，数据传输率高<br />&emsp;通信延迟时间短，误码率低，可靠性高<br />&emsp;各站为平等关系，共享传输信道<br />&emsp;多采用分布式控制和广播式通信，能进行广播和组播</li>
<li>局域网三要素：网络拓扑、传输介质、介质访问控制方法</li>
<li>有线局域网常用介质：双绞线、同轴电缆、光纤<br />无线局域网常用介质：电磁波</li>
<li>CSMA/CD：常用于总线型局域网，也用于树型网络<br />令牌总线：常用于总线型局域网，也用于树型网络，逻辑上是环网<br />令牌环：用于环型局域网，如令牌环网</li>
<li>局域网分类<br />&emsp;以太网：符合IEEE 802.3系列标准规范，逻辑拓扑总线型，物理拓扑星型或拓展星型，使用CSMA/CD<br />&emsp;令牌环网：物理上采用了星型拓扑结构，逻辑上是环型拓扑结构<br />&emsp;FDDI (Fiber Distributed Data Interface)网：物理上采用双环结构，逻辑上是环型拓扑结构<br />&emsp;ATM (Asynchronous Transfer Mode)网：单元交换技术，使用53字节固定长度的单元进行交换<br />&emsp;无线局域网：WLAN (Wireless Local Area Network)，采用IEEE 802.11标准</li>
<li>IEEE 802.3：以太网介质访问控制协议 (CSMA/CD)及物理层技术规范<br />IEEE 802.5：令牌环网 (Token-Ring)的介质访问控制协议及物理层技术规范<br />IEEE 802.8：光纤技术咨询组，提供有关光线联网的技术咨询<br />IEEE 802.11：无线局域网的介质访问控制协议及物理层技术规范</li>
<li>IEEE 802标准将数据链路层划分为逻辑链路层LLC子层和介质访问控制MAC子层，LLC是MAC的上层<br />LLC负责识别网络层协议，并对他们进行封装。LLC报头高数数据链路层一旦帧被接收到是，应当对数据包做何处理。为网络层提供服务：无确认无连接、面向连接、带确认无连接、高速传送<br />MAC子层的主要功能包括数据帧的封装/卸装，帧的寻址和识别，帧的接收与发送，链路的管理，帧的差错控制等。MAC子层的存在屏蔽了不同物理链路种类的差异性</li>
</ol>
<h2 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h2><ol>
<li>以太网提供无连接、不可靠的服务<br />无连接：发送方和接收方之间无握手过程<br />不可靠：不对发送方的数据帧编号，接收方不向发送方进行确认，差错帧直接丢弃，差错纠正由高层负责</li>
<li>10BASE-T以太网：传送基带信号 (BASE)的双绞线 (T)以太网，传输速率为<script type="math/tex">10\ Mb/s</script>。采用无屏蔽双绞线 (UTP)，曼切斯特编码</li>
<li>通信适配器：计算机与外界局域网的连接途径。包括网络接口板、网络接口卡NIC (network interface card)，装有处理器和存储器 (RAM和ROM)，ROM上有计算机硬件地址MAC地址</li>
<li>MAC地址：硬件地址/物理地址，每个适配器都有一个全球唯一的48位二进制地址，前24位表示厂家 (IEEE规定)，后24位厂家自己决定。常用6个十六进制数表示，用$-$或$:$连接</li>
<li>以太网MAC帧<br /><img src="/img/06.数据链路层的应用01.jpeg" width="75%">目的地址和源地址都是MAC地址，只要6字节<br />采用曼切斯特编码，当电平没有变化时就表示传输结束，无需插入结束定界符</li>
<li>速率高于<script type="math/tex">100\ Mb/s</script>的以太网称为高速以太网<br />100BASE-T以太网，在双绞线上传送<script type="math/tex">100\ MB/s</script>基带信号的星型拓扑以太网，仍使用IEEE 802.3的CSMA/CD协议，支持全双工和半双工<br />吉比特以太网：在光纤或双绞线上传送<script type="math/tex">1\ Gb/s</script>信号，支持全双工和半双工<br />10吉比特以太网：在光纤上传送<script type="math/tex">10\ Gb/s</script>信号，只支持全双工</li>
</ol>
<h2 id="无线局域网"><a href="#无线局域网" class="headerlink" title="无线局域网"></a>无线局域网</h2><ol>
<li>无线局域网分为有固定基础设施无线局域网和无固定基础设施无线局域网的自组织网络</li>
<li>基本服务集 (BSS)：利用一个基站 (AP)或分配系统 (DS)互相通信的一组设备，一个基站对应一个基本服务集，用基本服务集标识 (BSSID)区分</li>
<li>BSS中的AP或DS就是有固定基础设施无线局域网中的固定基础设施</li>
<li>独立基本服务集 (IBSS)：无需通过DS的协助即可直接进行通信，是一种特殊的BSS</li>
<li>IBSS就是无固定基础设施无线局域网的自组织网络</li>
<li>802.11的MAC帧头格式<br /><img src="/img/06.数据链路层的应用02.png"><br />这里的地址也是MAC地址<br />地址1是直接接受这个帧的设备的地址，地址2是直接发送这个帧的设备的地址，地址3和地址4机动使用，但是要求能识别源设备，目的设备或涉及的BSSID</li>
<li>当帧从IBSS中发出时，被这个IBSS内的另一个设备接收，所以To DS和From DS都为0，地址1就是目的设备地址，地址2就是源设备地址，还差一个BSSID，就填在地址3上，地址4不使用</li>
<li>当帧要从设备发送到另一个AP时，To DS为1，From DS为0，地址1就是目的AP的BSSID，地址2就是源设备地址，还差一个目的设备地址填在地址3，地址4不使用</li>
<li>当帧要从AP发送到目标设备时，To DS为0，From DS为1，地址1就是目标设备地址，地址2就是BSSID，还差一个源设备地址填在地址3上，地址4不使用</li>
<li>当帧要在无线分布系统间传输时，To DS和From DS都为1，地址1就是目的AP地址，地址2就是本AP地址，还差目的设备地址填在地址3、源设备地址填在地址4</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">功能</th>
<th style="text-align:center">To DS</th>
<th style="text-align:center">From DS</th>
<th style="text-align:center">地址1</th>
<th style="text-align:center">地址2</th>
<th style="text-align:center">地址3</th>
<th style="text-align:center">地址4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">IBSS</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">目的设备</td>
<td style="text-align:center">源设备</td>
<td style="text-align:center">BSSID</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">To AP</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">BSSID</td>
<td style="text-align:center">源设备</td>
<td style="text-align:center">目的设备</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">From AP</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">目的设备</td>
<td style="text-align:center">BSSID</td>
<td style="text-align:center">源设备</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">WDS</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">接收端</td>
<td style="text-align:center">发送端</td>
<td style="text-align:center">目的设备</td>
<td style="text-align:center">源设备</td>
</tr>
</tbody>
</table>
</div>
<h1 id="广域网"><a href="#广域网" class="headerlink" title="广域网"></a>广域网</h1><ol>
<li>广域网 (WAN, Wide Area Network)：跨接很大的物理范围，主要使用分组交换技术，将不同地区的局域网或计算机系统互连起来</li>
<li>因特网是最大的广域网</li>
<li>广域网覆盖了物理层、数据链路层、网络层</li>
</ol>
<h2 id="PPP协议"><a href="#PPP协议" class="headerlink" title="PPP协议"></a>PPP协议</h2><ol>
<li>点对点协议 (PPP, Point-to-Point Protocol)：最广泛使用的数据链路层广域网协议，只支持全双工链路</li>
<li>PPP协议应满足的要求：简单，封装成帧，透明传输，支持多种网络层协议，支持多种类型链路，差错检测，检测连接状态 (链路是否正常工作)，限制最大传送单元MTU，网络层地址协商，数据压缩协商</li>
<li>PPP协议无需满足的要求：纠错，流量控制，可靠传输，编号，多点线路</li>
<li>PPP协议的三个部分：一个将IP数据报封装到串行链路 (同步串行/异步串行)的方法、链路层控制协议LCP建立并维护数据链路连接、网络层控制协议NCP (每个不同的网络层协议都需要一个NCP来为网络层协议建立和配置逻辑连接)</li>
<li>PPP协议帧格式<br /><img src="/img/06.数据链路层的应用03.png"><br />两个帧定界符都是<script type="math/tex">7E\ (0111\ 1110)</script>，转义字符为<script type="math/tex">7D\ (0111\ 1101)</script><br />地址字段和控制字段暂时没有意义<br />协议字段标识IP数据报、LCP的数据、网络层控制数据</li>
<li>PPP协议的步骤<br />&emsp;原本设备之间无链路，物理层建立了连接，成立了物理链路<br />&emsp;然后LCP配置协商，就建立LCP链路<br />&emsp;鉴别LCP，成功了就时已鉴别的LCP链路<br />&emsp;网络层协议再经过NCP配置协商，成功了就建立已鉴别的LCP链路和NCP链路</li>
</ol>
<h2 id="HDLC协议"><a href="#HDLC协议" class="headerlink" title="HDLC协议"></a>HDLC协议</h2><ol>
<li>高级数据链路控制 (HDLC, High-Level Data Link Control)面向比特的数据链路层协议，采用0比特插入法，全双工通信，对信息帧进行顺序编号，课防止漏收或重收，传输可靠性高</li>
<li>主站：发送命令 (包括数据信息)帧、接收响应帧，并负责对整个链路的控制系统的初启、流程的控制、差错检测或恢复</li>
<li>从站：接收由主站发来的命令帧，向主站发送响应帧，并配合主站参与差错恢复等链路控制</li>
<li>复合站：既能发送，又能接收命令帧和响应帧，并负责整个链路的控制</li>
<li>三种数据操作方式：正常响应方式、异步平衡方式、异步响应方式</li>
<li>HDLC的帧格式<br /><img src="/img/06.数据链路层的应用04.png"><br />基本与PPP协议帧一致，信息部分采用零比特传输<br />信息帧的控制部分第一位为0，用来传输数据信息，或使用捎带技术对数据进行确认<br />监督帧的控制部分为10，用于流量控制和差错控制，执行对信息帧的确认、请求重发和请求暂停发送等功能<br />无编号帧的控制部分为11，用于提供对链路的建立、拆除等多种控制功能</li>
</ol>
<h1 id="链路层设备"><a href="#链路层设备" class="headerlink" title="链路层设备"></a>链路层设备</h1><ol>
<li>光纤调制器：实现光信号和电信号的转化</li>
<li>冲突域：每一个集线器及其连接的设备构成一个冲突域，在同一个冲突域中的每一个节点都能收到所有被发送的帧，同一时间只能有一台设备发送信息的范围<br />用一个集线器连接多个集线器就可以扩展冲突域</li>
<li>广播域：网络中内接收任何一设备发出的广播帧的所有设备的集合</li>
<li>网段：使用同一个物理层设备能过直接通讯的部分</li>
<li>网桥：根据MAC的目的地址对帧进行转发和过滤 (丢弃)，不会和集线器一样向所有接口转发收到的帧</li>
<li>网桥的每一个端口都是一个网段，可以过滤通信量，增大吞吐量；扩大了物理范围；提高了可靠性</li>
<li>网桥分类<br />&emsp;透明网桥：以太网上的站点并不知道锁发送的帧要经过哪几个网桥，网桥通过自学习算法确定如何转发过滤，即插即用<br />&emsp;源路由网桥：在发送帧时，把详细的最佳路由信息 (路由最少 / 时间最短)放在帧的首部</li>
<li>自学习算法：每个网桥自我维护一个转发表，并对每一个接口进行编号<br />当收到一个帧时，<br />&emsp;如果转发表内没有发送设备的信息，就记录下该发送设备的信息并标记为收到该帧的接口<br />&emsp;如果转发表内没有接收设备的信息，就把帧从除接收接口外的所有接口转发出去，无需记录信息<br />&emsp;如果转发表内有接收设备的信息<br />&emsp;&emsp;如果转发表的接口不是接收接口，就按转发表的信息从特定接口转发<br />&emsp;&emsp;如果转发表的接口时接收接口，就直接丢弃帧 </li>
<li>源路由网桥中的源站以广播的方式向欲通信的目的站发送一个发现帧来确定最佳路由信息</li>
<li>以太网交换机：有多个接口的网桥，每一个端口都是一个冲突域</li>
<li>以太网交换机的两种交换方式<br />&emsp;直通式交换机：查完目的地址就立刻转发。延时小，可靠性低，无法支持具有不同速率的端口交换<br />&emsp;存储转发式交换机：将帧放入高速缓存，并检查是否正确，正确则转发，错误则丢弃。延迟大，可靠性高，可以支持具有不同速率的端口交换<br />&emsp;混合式交换机</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2020/12/22/05-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%8A%9F%E8%83%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/22/05-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%8A%9F%E8%83%BD/" class="post-title-link" itemprop="url">05. 数据链路层的功能</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-22 15:36:27" itemprop="dateCreated datePublished" datetime="2020-12-22T15:36:27+08:00">2020-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-27 21:40:38" itemprop="dateModified" datetime="2021-01-27T21:40:38+08:00">2021-01-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><ol>
<li>结点：主机、路由器</li>
<li>链路：网络中两个结点之间的物理通道，分为有线链路和无线链路</li>
<li>数据链路：网络中两个结点之间的逻辑通道，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路</li>
<li>帧：链路层的协议数据单元，封装网络层数据报</li>
<li>数据链路层负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报</li>
<li>数据链路在物理层提供服务的基础上向网络层提供服务<br />最基本服务：将源自网络层来的数据可靠地传输到相邻结点的目标网络层<br />主要作用：加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接改造成为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路</li>
<li>五大功能：为网络层提供服务、链路管理、组帧、流量控制、差错控制</li>
<li>为网络层提供的服务包括：无确认无连接服务、有确认无连接服务，有确认面向连接服务<br />其中无确认无连接服务主要用于实时服务或误码率较低的服务，有确认无连接服务主要用于误码率较高的服务，如无线连接</li>
<li>链路控制用于面向连接的服务，连接建立、维持、释放</li>
</ol>
<h1 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h1><ol>
<li>封装成帧：在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束</li>
<li>首部和尾部包含许多控制信息，其中最重要的一个是帧定界符，其作用是帧定界</li>
<li>帧同步：接收方能从接收到的二进制比特流中区分出帧的起始和终止</li>
<li>数据链路层的帧长：包括帧首部和帧尾部的整个数据长度</li>
<li>帧的数据部分不大于最大传输单元MTU</li>
<li>透明传输：不管所传输的是什么样的比特组合，都应当能够在链路上传输</li>
<li>字符计数法：帧的首部用一个字节来标明帧内包括该计数字段在内的总长度<br />如果有一个帧的计数字段出错，该帧之后的每一帧都会出错</li>
<li>字符填充法：在帧首部添加SOH (Start of Header)表示帧的开始，在尾部添加EOT (End of Transmission)表示帧的开始<br />当传送的帧由ASCII码组成时，无需担心在帧内出现和SOH或EOT重复的字段<br />当传送的帧由非ASCII码组成是，就有可能出现和SOH或EOT重复的字段，就可能出现误解导致无法帧同步<br />发送端：在帧内除真正的SOH和EOT外的每一个冲突的字段前都添加一个转义字符ESC，与ESC冲突的字段前也要添加ESC<br />接收端：若检测到ESC，将其删除，并将下一字节处理成数据而非标记</li>
<li>零比特填充法：在帧首部和尾部各添加一字节的$01111110$<br />发送端：只要有连续的$5$个$1$，不管其后面是什么，就在后面添加$1$个$0$<br />接收端：每发现连续的$5$个$1$，就删除其后的$1$个$0$</li>
<li>违规码编法：曼切斯特编码在每一个码元之内都是高-低或低-高格式，用高-高或低-低表示帧的起始和终止</li>
<li>字节计数法过于脆弱，字符填充法较为复杂，较普遍使用比特填充和违规编码法</li>
</ol>
<h1 id="差错控制"><a href="#差错控制" class="headerlink" title="差错控制"></a>差错控制</h1><h2 id="检错编码"><a href="#检错编码" class="headerlink" title="检错编码"></a>检错编码</h2><ol>
<li>传输中差错都是噪声引起的<br />全局性：线路本身电器特性所产生的随机噪声 (热噪声)导致的，是信道固有的，随机存在。可以通过提高信噪比来解决，改进传感器<br />局部性：外界特定的短暂原因所造成的冲击噪声。可以利用编码技术解决</li>
<li>差错分为两类<br />位错：bit位出错，1变成0，0变成1<br />帧错：丢失、重复、失序</li>
<li>奇偶校验码：添加一个bit，让整个编码中1的个数为奇数的是奇校验码，让整个编码中1的个数为偶数的是偶校验码<br />奇偶校验码只能检测出奇数个bit错误，检错能力为$50\%$</li>
<li>CRC循环冗余码：<br />发送方：给定一个$r+1$位的生成多项式，要得到一个$r$位的FCS冗余码，使得原数据的尾部拼接上FCS之后可以得到一个生成多项式的倍数<br />接收方：把接收到的数据除以生成多项式，如果余数是0，则表示数据没有出错；否则，数据出错<br />计算方法：先在原数据的末尾添上$r$个0，再将加了0的数据和生成多项式做模2除法，即异或。当右边有$r+1$位后就和生成多项式做一次异或，并上商1；否则降一位，上商0；直到所有位都降完<br />生成多项式既可能是一串二进制数，也可能是一个多项式，只需补齐低阶项，取系数。如多项式$x^4+x+1$补齐后是$1\cdot x^4+0\cdot x^3+0\cdot x^2+1\cdot x+1$生成多项式为$10011$</li>
</ol>
<h2 id="纠错编码"><a href="#纠错编码" class="headerlink" title="纠错编码"></a>纠错编码</h2><ol>
<li>码字的海明距离 (码距)：两个合法编码 (码字)的对应比特取值不同的比特数<br />编码集的海明距离：任意两个合法编码的海明距离的最小值</li>
<li>如果要检错$d$位，码距为$d + 1$；如果要纠正$d$位，码距为$2d + 1$</li>
<li>确定校验码位数：数据/信息有$m$位，冗余码/校验码有$r$位。校验码有$2^r$种取值，要标志的状态包括$m+r$种1位比特错误情况以及一种正确情况，所以$2^r≥m+r+1$，可以解出$r$的最小取值</li>
<li>确定校验码和数据的位置<br />各个位置从1开始编号，把校验码插入到序号为$2^n$的位置上，其余数据按顺序填上<br />采用奇/偶校验，在序号为$2^n$位置上的校验码负责所有序号二进制第$n$位为$1$的位置上的比特</li>
<li>检错：按各个校验位的管辖范围，看是否满足规定的奇/偶校验</li>
<li>纠错<br />方法一：找到不满足奇/偶校验的分组取交集，并与符合校验的分组取差集<br />方法二：先将各个校验位的管辖范围内的所有位异或，得到每个校验位对应的一个比特，将结果按高位校验位的比特放在高位，低位校验位的比特放在低位。如果是偶校验结果就是错误比特的位置序号，如果是奇校验，结果的反码就是错误比特的位置序号</li>
</ol>
<h1 id="流量控制和可靠传输"><a href="#流量控制和可靠传输" class="headerlink" title="流量控制和可靠传输"></a>流量控制和可靠传输</h1><ol>
<li>差错控制验证比特是否有错，流量控制和可靠传输解决丢包问题</li>
<li>流量控制：控制发送速率，使接收方有足够的缓存空间来接收每一个帧</li>
<li>可靠传输：正确接收发送端发送的数据</li>
<li>需要流量控制的原因：较高的发送速度和较低的接受能力的不匹配会造成传输出错</li>
<li>数据链路层的流量控制是点对点的，传输层的流量控制是端到端的<br />数据链路层控制的手段是接收方收不下就不回复确认，传输层流量控制的手段是接收端给发送端一个窗口公告</li>
<li>实现可靠传输的手段使发送方自动重传</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">协议</th>
<th style="text-align:center">发送窗口大小</th>
<th style="text-align:center">接收窗口大小</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">停止-等待协议</td>
<td style="text-align:center">$1$</td>
<td style="text-align:center">$1$</td>
</tr>
<tr>
<td style="text-align:center">后退N帧协议</td>
<td style="text-align:center">$&gt; 1$</td>
<td style="text-align:center">$1$</td>
</tr>
<tr>
<td style="text-align:center">选择重传协议</td>
<td style="text-align:center">$&gt;1$</td>
<td style="text-align:center">$1$</td>
</tr>
</tbody>
</table>
</div>
<h2 id="停止-等待协议"><a href="#停止-等待协议" class="headerlink" title="停止-等待协议"></a>停止-等待协议</h2><ol>
<li>基本内容：每发送完一个分组就停止发送，等待对方确认，在收到确认后再发送下一个分组</li>
<li>每发送1个数据帧就停止并等待，只要1bit编号就可以</li>
<li>无差错情况<br />&emsp;发送方发送编号为$0$的帧，接收方确认该编号为$0$的帧，并返回一个<script type="math/tex">ACK\ 0</script>给发送方<br />&emsp;发送方接收到<script type="math/tex">ACK\ 0</script>后，再发送编号为$1$的帧；接受放确认该编号为$1$的帧，并返回一个<script type="math/tex">ACK\ 1</script>给发送方<br />&emsp;发送方收到<script type="math/tex">ACK\ 1</script>后，再发送编号为$0$的帧……</li>
<li>数据帧丢失或检测到帧出错<br />&emsp;发送方发送编号为$0$的帧，接收方确认该编号为$0$的帧，并返回一个<script type="math/tex">ACK\ 0</script>给发送方<br />&emsp;发送方接收到<script type="math/tex">ACK\ 0</script>后，再发送编号为$1$的帧；编号为$1$的帧丢失或出错，接收方不发送$ACK$确认帧<br />&emsp;超时计时器到时后，发送方超时重传编号为$1$的帧。重复，直到收到了<script type="math/tex">ACK\ 1</script><br />每发送一个帧就启动一个超时计时器，超时计时器设置的重传时间应比平均RTT更长一些<br />发送完一个帧后，必须保留副本，数据帧和确认帧必须编号</li>
<li>确认帧丢失<br />&emsp;发送方发送编号为$0$的帧，接收方确认该编号为$0$的帧，并返回一个<script type="math/tex">ACK\ 0</script>给发送方<br />&emsp;发送方接收到<script type="math/tex">ACK\ 0</script>后，再发送编号为$1$的帧；接受放确认该编号为$1$的帧，并返回一个<script type="math/tex">ACK\ 1</script>给发送方<br />&emsp;这个<script type="math/tex">ACK\ 1</script>在传输过程中丢失，导致发送方收不到确认帧超时重传。接受方在接收到超时重传的确认帧后丢弃重复的帧，重传确认帧</li>
<li>确认帧迟到<br />&emsp;发送方发送编号为$0$的帧，接收方确认该编号为$0$的帧，并返回一个<script type="math/tex">ACK\ 0</script>给发送方<br />&emsp;发送方接收到<script type="math/tex">ACK\ 0</script>后，再发送编号为$1$的帧；接受放确认该编号为$1$的帧，并返回一个<script type="math/tex">ACK\ 1</script>给发送方<br />&emsp;这个<script type="math/tex">ACK\ 1</script>在传输过程中延迟，导致发送方触发超时重传。接受方在接收到超时重传的确认帧后丢弃重复的帧，重传确认帧<br />&emsp;之后发送方又收到了之前延迟的确认帧，收下后就直接丢弃</li>
<li>信道利用率：$U=\displaystyle\frac{数据帧的传输时延}{数据帧的传输时延+RTT+确认帧的接受时延}$，表示的是发送数据帧的用时占比</li>
<li>停等协议的为题：信道利用率低，对与停等协议$U=\displaystyle\frac{\frac{数据帧长度}{传输速率}}{发送周期}=\frac{传输时延}{收到ACK的时间}$，其中发送周期是从开始发送数据到收到第一个确认帧为止</li>
<li>$信道吞吐量=信道利用率\times 发送方的发送速率$</li>
</ol>
<h2 id="后退N帧协议-GBN"><a href="#后退N帧协议-GBN" class="headerlink" title="后退N帧协议 (GBN)"></a>后退N帧协议 (GBN)</h2><ol>
<li>为提高信道利用率，GBN协议让发送方可以发送多个帧之后再停下，等待确认帧</li>
<li>发送窗口：发送方维持的一组连续的允许发送的帧的序号</li>
<li>接收方还是只认一个帧，只能按序接受。只要前面的帧没有收到，后面的帧就算来了，也直接丢弃</li>
<li>发送方必须相应的三件事<br />&emsp;上层的调用：上层要发送数据，如果发送窗口满了，就将帧返回给上层，暗示上层窗口已满，等会再发<br />&emsp;收到一个ACK：对$n$号帧的确认采用累积确认，表明接受方已经收到$n$号帧及其以前的所有帧<br />&emsp;超时事件：只有接收方当前期望的帧，即未被确认的最小帧，有超时计时器，如果出现超时，发送方重传所有已发送但未被确认的帧</li>
<li>接收方要做的事<br />&emsp;如果正确收到$n$号帧，就发送一个ACK，并将帧中的数据部分交付给上层<br />&emsp;其余任何情况都丢弃帧，并为最近按序接收的帧重新发送ACK</li>
<li>若编号有$n$个比特，则发送窗口的尺寸$W_T$应满足$1≤W_T≤2^n-1$，发送尺寸过大，会导致接收方无法区别新帧和旧帧</li>
<li>缺陷：除了接收方想要的$n$号帧，其余的帧就算正确送达了也会被丢弃，也要重传。如果当前接受方想要的帧丢失或错误，在该帧之后的所有帧都白传</li>
</ol>
<h2 id="选择重传协议-SR"><a href="#选择重传协议-SR" class="headerlink" title="选择重传协议 (SR)"></a>选择重传协议 (SR)</h2><ol>
<li>为了解决GBN协议的缺陷，可以加大接受窗口，设置接收缓存，缓存乱序到达的帧</li>
<li>接受窗口：接收方维持的一组连续的允许接收帧的序号</li>
<li>SR发送方和GBN发送方的区别<br />&emsp;收到了一个ACK，如果序号在窗口内，就将其标记为已接收<br />&emsp;如果窗口内最小的一系列帧都已经被确认，则将窗口移动到具有最小序号的未确认帧处，并发送窗口内所有未发送的帧<br />&emsp;每一个帧都有一个超时计时器，一个超时事件发生后只重传一个帧</li>
<li>SR接收方和GBN接收方的区别<br />&emsp;确认每一个正确接收的，在接收窗口内的帧，不管其是否按序。失序的帧将被缓存，并返回给发送方一个确认帧<br />&emsp;如果窗口内最小的一系列帧都已经被确认，则将一批帧交付给上层，并将窗口移动到具有最小序号的未确认帧处<br />&emsp;如果收到了小于窗口下界的帧，就丢弃该帧，并返回一个ACK；如果收到了大于窗口上界的帧，就直接丢弃，不返回ACK</li>
<li>发送窗口最好等于接受窗口，即$W_{Tmax}=W_{Rmax}=2^{(n-1)}$<br />&emsp;这里不是$2^n$是由于可能会接收到小于窗口下界一个窗口长度内的帧，为了区分下界外的帧和界内的帧，窗口大小只能是标号范围的一半大<br />&emsp;只有ACK丢失或延迟，发送方超时重传，才会导致接收到窗口下界以下的帧。发送窗口只有在最小帧的ACK帧丢失的情况下才会与接受窗口差距最大，为一个窗口长度<br />&emsp;不存在一个不在发送窗口内，没被发送过却被确认的帧，所以小于接收窗口的下界的帧一定不大于发送窗口的上界，即发送窗口的上界不小于接收窗口的下界<br />&emsp;综上，会收到的小于接收窗口的帧必定在接收窗口下界的一个窗口长度内</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2020/12/22/04-%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8%E5%92%8C%E8%AE%BE%E5%A4%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/22/04-%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8%E5%92%8C%E8%AE%BE%E5%A4%87/" class="post-title-link" itemprop="url">04. 传输介质和设备</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-22 15:32:26" itemprop="dateCreated datePublished" datetime="2020-12-22T15:32:26+08:00">2020-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-27 21:40:33" itemprop="dateModified" datetime="2021-01-27T21:40:33+08:00">2021-01-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="传输介质"><a href="#传输介质" class="headerlink" title="传输介质"></a>传输介质</h1><ol>
<li>传输介质 (传输媒体 / 传输媒介)：数据传输系统中在发送设备和接收设备之间的物理通路</li>
<li>传输媒体不是物理层，在物理层下面。在传输媒体中传输的是信号，但传输媒体并不 知道所传输的信号代表什么意思，电气特性由物理层规定</li>
<li>传输介质分导向性传输介质和非导向性传输介质<br />非导向性介质：自由空间，介质可以是空气、真空、海水等</li>
</ol>
<h2 id="导向性传输介质"><a href="#导向性传输介质" class="headerlink" title="导向性传输介质"></a>导向性传输介质</h2><p>导向性介质：电磁波被导向着沿着固体媒介传播</p>
<h3 id="双绞线"><a href="#双绞线" class="headerlink" title="双绞线"></a>双绞线</h3><ol>
<li>双绞线：由两根采用一定规则并排绞合的、相互绝缘的铜导线组成</li>
<li>绞合可以减少对相邻导线的电磁干扰</li>
<li>双绞线的外面再加一层由金属丝编织成的屏蔽层就从非屏蔽双绞线变为屏蔽双绞线</li>
<li>双绞线再局域网和传统电话网中普遍使用。模拟传输和数字传输都可以使用双绞线，其通信距离一般为几公里到数十公里。距离太远时，对于模拟传输要用放大器放大衰减的信号；对于数字传输，要用中继器将失真的信号整形</li>
</ol>
<h3 id="同轴电缆"><a href="#同轴电缆" class="headerlink" title="同轴电缆"></a>同轴电缆</h3><ol>
<li>同轴电缆：导体铜质芯线、绝缘层、网络编织屏蔽层和塑料外层构成</li>
<li>基带同轴电缆：<script type="math/tex">50\ \Omega</script>同轴电缆主要用于传送基带数字信号<br />宽带同轴电缆：<script type="math/tex">75\ \Omega</script>同轴电缆主要用于有线电视系统</li>
<li>相比于双绞线，抗干扰特性好，被广泛用于传输较高速率的数据，其传输距离更远，但价格较贵</li>
</ol>
<h3 id="光纤"><a href="#光纤" class="headerlink" title="光纤"></a>光纤</h3><ol>
<li>光纤：利用光导纤维传递光脉冲来通信。有光脉冲表示1，无光脉冲表示0</li>
<li>光纤通信系统的带宽远远大于目前其他各种传输媒体的带宽</li>
<li>发送端：电脉冲作用下发光二极管或半导体激光器产生出光脉冲<br />接收端：用光电二极管做成光检测器，把光脉冲还原成电脉冲</li>
<li>光纤由纤芯和包层构成。光波在纤芯中通过不断全反射，沿纤芯传播</li>
<li>单模光纤：光纤较细，光波在里面几乎沿直线传播，但只有一种光信号。要求光源时定向性很好的激光二极管。衰耗小，适合远距离传输<br />多模光纤：光纤较粗，可以有多种光信号传播。光源通常时发光二极管。易失真，适合近距离传输</li>
<li>光缆：多根光纤组成的线，一根光缆可以只有一根光纤，也可以有数百根</li>
<li>光纤传输损耗小，中继距离长，对远距离传输特别经济<br />抗雷电和电磁干扰性能好<br />无串音干扰，保密性好，也不易被窃听或截取数据<br />体积小，重量轻</li>
</ol>
<h2 id="非导向性传输介质"><a href="#非导向性传输介质" class="headerlink" title="非导向性传输介质"></a>非导向性传输介质</h2><ol>
<li>无线电波：信号向所有方向传播；较强穿透能力，可传远距离，广泛用于通信领域。</li>
<li>微波：信号方向固定传播，通信频率较高、频段范围宽，数据率高<br />地面微波接力通信：在地面上建立多个微波基站，信号在基站间转发传输<br />卫星通信：基站建立在太空中，信号固定方向传播。通信容量大，距离远，覆盖广，广播通信和多址通信；传播时延长，受气候影响大，误码率较高，成本高</li>
<li>红外线、激光：信号固定方向传播。把要传输的信号分别转换为各自的信号格式，再传播</li>
</ol>
<h1 id="物理层设备"><a href="#物理层设备" class="headerlink" title="物理层设备"></a>物理层设备</h1><ol>
<li>中继器：对信号进行再生和还原，对衰减的信号进行放大，保持与原数据相同，以增加信号传输的距离，延长网络长度</li>
<li>中继器的两端的网络部分是网段，而不是子网，适用于完全相同的两类网络的互连，且两个网段的速率要相同。两端可以连接相同的传输媒体，也可以连接不同的传输媒体，但一定要是同一个协议</li>
<li>中继器只将任何电缆段上的数据发送到另一电缆上，他仅作用于信号的电气部分，并不管数据中是否有错误数据或不适于网段的数据</li>
<li>过多的中继器会导致延迟增大，所以网络标准中都对信号的延迟范围做了具体的规定，因而中继器只能在规定的范围内进行，否则会网络故障<br />5-4-3规则：五段传输媒体，四个中继器，三个终端</li>
<li>集线器：多口中继器，会把信号发给每一个端口，不是定向传输。不能分割冲突域，如果有很多终端连接到一个集线器上，则会平分带宽</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2020/12/18/%E5%9F%BA%E9%87%91%E5%AE%9A%E6%8A%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/18/%E5%9F%BA%E9%87%91%E5%AE%9A%E6%8A%95/" class="post-title-link" itemprop="url">基金定投</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-12-18 23:23:05 / Modified: 23:25:19" itemprop="dateCreated datePublished" datetime="2020-12-18T23:23:05+08:00">2020-12-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%9C%8B%E8%BF%87%E7%9A%84%E4%B9%A6/" itemprop="url" rel="index">
                    <span itemprop="name">看过的书</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="/img/基金定投.png" alt=""></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2020/12/15/03-%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/15/03-%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">03. 通信基础</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-15 15:44:07" itemprop="dateCreated datePublished" datetime="2020-12-15T15:44:07+08:00">2020-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-27 21:40:27" itemprop="dateModified" datetime="2021-01-27T21:40:27+08:00">2021-01-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="物理层接口特性"><a href="#物理层接口特性" class="headerlink" title="物理层接口特性"></a>物理层接口特性</h1><ol>
<li>解决如何在连接各种计算机的传输媒体传输上传输比特流，而不是指具体的传输模块</li>
<li>主要任务是确定与传输媒体接口有关的一些特性，定义标准</li>
<li>机械特性：定义物理连接的特性，规定物理连接时所采用的规格、接口形状、<code>引线数目</code>、<code>引脚数量</code>和排列情况</li>
<li>电气特性：规定传输二进制位时，线路上信号的<code>电压范围</code>、阻抗匹配、传输<code>速率</code>和<code>距离</code>限制</li>
<li>功能特性：指明某条线上出现的某一<code>电平表示何种意义</code>，接口部件的信号线的用途</li>
<li>规程特性 (过程特性)：定义各条物理线路的工作<code>规程和时序</code>关系</li>
</ol>
<h1 id="数据通信模型"><a href="#数据通信模型" class="headerlink" title="数据通信模型"></a>数据通信模型</h1><ol>
<li><code>输入信息</code>经过<code>信源</code>变为<code>输入数据</code><br /><code>输入数据</code>经过<code>发送器</code>变为<code>发送信号</code><br /><code>发送信号</code>经过<code>传输系统</code>变为<code>接受信号</code><br /><code>接受信号</code>经过<code>接收器</code>变为<code>输出数据</code><br /><code>输出数据</code>经过<code>信宿</code>变为<code>输出信息</code></li>
<li>从开始到发送器成为源系统；从接收器到最后称为目的系统；中间的是传输系统</li>
<li>通信的目的是传送消息<br />数据：传送信息的实体，通常是有意义的符号序列<br />数据通信：在不同计算机之间传输表示信息的二进制数0、1序列的过程</li>
<li>信号：数据的电气、电磁的表现，是数据在传输过程中的存在形式<br />数字信号 / 离散信号：代表消息的参数的取值是离散的<br />模拟信号 / 连续信号：代表消息的参数的取值是连续的</li>
<li>信源：产生恶化发送数据的源头<br />信宿：接受数据的终点</li>
<li>信道：信号的传输媒介。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接受信道。信道是单向的<br />按传输信号分：模拟信道、数字信道<br />按传输介质分：无线信道、有线信道</li>
<li>单工通信：只有一个方向的通信而没有反方向的交互，仅需要一条信道<br />半双工通信 / 双向交替通信：通信的双方都可以发送货接受信息，但任何一方都不能同时发送和接受，需要两条信道<br />全双工通信 / 双向同时通信：通信双方可以同时发送和接受信息，需要两条信道</li>
<li>串行传输：将表示一个字符的8位二进制数按低位到高位的顺序依次发送。速度慢，费用低，适合远距离<br />并行传输：将表达一个字符的8位二进制数同时通过8条信道发送。速度快，费用高，适合近距离</li>
<li>同步传输 (区块传输)：数据的传送是以一个数据区块为单位，在传送数据时，需先送出1个或多个同步字符，再送出整批的数据。传送数据时，加多个同步字符<br />异步传输：将比特分为小组进行传送，小组可以是8位或更长。发送方可以在任何时刻发送这些比特组，而接收方不知道它们会在什么时候到达。传送数据时，加一个字符起始位和一个字符终止位</li>
<li>码元：用一个固定时长的信号波形 (数字脉冲)，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为$k$进制码元，该时长称为码元宽度。当码元的离散状态有$M$个时，码元为$M$进制码元<br />码元是基本波形，波形每一次变动都是一个码元<br />一个码元可以携带多个bit的信息量，$M$进制码元可以携带$log_2M$个bit的信息量</li>
<li>速率 / 数据率：数据的传输速率，表示单位时间内传输的数据量<br />波特率 / 码元传输速率 / 码元速率 / 波形速率 / 调制速率 / 符号速率：单位时间内数字通信系统所传输的码元个数 (脉冲个数 / 信号变化个数)。单位是波特 ($Baud / B$)<br />波特率与进制数无关，只与码元宽度$T$有关<script type="math/tex">R_B=\displaystyle\frac{1}{T}\ \ B</script><br />比特率 (信息传输速率 / 信息速率)：单位时间内数字通信系统传输的比特数。单位是$b/s$<br />若一个码元携带<script type="math/tex">n\ bit</script>的信息量，则<script type="math/tex">M\ B</script>的波特率所对应的比特率为<script type="math/tex">M\times n\ bit/s</script></li>
<li>带宽：单位时间从网络中的一点到另一点所能通过的最高数据率，或单位时间内通过链路的数量。单位是$bps$</li>
</ol>
<h1 id="奈氏准则与香农定理"><a href="#奈氏准则与香农定理" class="headerlink" title="奈氏准则与香农定理"></a>奈氏准则与香农定理</h1><h2 id="失真"><a href="#失真" class="headerlink" title="失真"></a>失真</h2><ol>
<li>失真：现实中的信道带宽受限、有噪声、干扰导致接受到的信号波形发送改变</li>
<li>失真的结果有两种：有失真但可识别和失真大无法识别</li>
<li>影响失真的因素<br />&emsp;波特率越大失真越严重<br />&emsp;信号传输距离越远失真越严重<br />&emsp;噪声干扰越大失真越严重<br />&emsp;传输媒体质量越差失真越严重</li>
<li>信号带宽：模拟信号的震动频率，单位$Hz$<br />信道带宽：信道能通过的最高频率和最低频率之差</li>
<li>码间串扰：接收端收到的信号波形失去了码元之间清晰界限的现象，是由信号带宽太大造成的</li>
</ol>
<h2 id="奈氏准则"><a href="#奈氏准则" class="headerlink" title="奈氏准则"></a>奈氏准则</h2><ol>
<li>奈氏准则：在理想低通 (无噪声，带宽受限)条件下，为了避免码间串扰，极限波特率为<script type="math/tex">2W\ Baud</script>，$W$是信道带宽，单位是$Hz$</li>
<li>$极限数据率=2Wlog_2V$ ($V$是码元离散电平数目)</li>
<li>任何信道中，码元传输速率有上限。若传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对码元的完全识别成为不可能</li>
<li>信道的频带越宽 (即能通过的信号高频分量越多)，就可以用更高的速率进行码元的有效传输</li>
<li>由于码元的传输速率受奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元能携带更多个bit的信息量，这就需要采用多元制的调制方法</li>
</ol>
<h2 id="香农定理"><a href="#香农定理" class="headerlink" title="香农定理"></a>香农定理</h2><ol>
<li>信噪比：衡量噪声对信号影响的大小。若信号强，噪声影响就相对较小</li>
<li>$信噪比=\displaystyle\frac{信号的平均功率}{噪声的平均功率}$，常记为$\displaystyle\frac SN$。若用 ($dB$)为单位，则$信噪比(dB)=10log_{10}(\displaystyle\frac SN)$</li>
<li>香农定理：在带宽受限且有噪声的信道中，为了不产生误差，可以清晰分辨是哪种码元，信息的比特率有上限值，<script type="math/tex">信道的极限比特率=Wlog_2(\displaystyle\frac SN)\ (b/s)</script></li>
<li>信道的带宽或信道的信噪比越大，则信息的比特率就越高</li>
<li>对一定的传输带宽和一定的信噪比，信息传输速率的上限就确定了</li>
<li>只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差别的传输</li>
<li>香农定理得出的为极限传输速率，实际信道能达到的传输速率要低不少</li>
</ol>
<h1 id="编码与调制"><a href="#编码与调制" class="headerlink" title="编码与调制"></a>编码与调制</h1><ol>
<li>基带信号：将数字信号$1$和$0$直接用两种不同的电压表示，再送到数字<code>信道上去</code>传输 (基带传输)。传输的是来自信源的信号，直接表达了要传输的信息。编码就是基带传输中规定的波形的含义<br />宽带信号：将基带信号进行调制后形成的频分复用模拟信号，再传送到<code>模拟信道</code>上去传输 (宽带传输)。把基带信号经过载波调制后，把信号的频率范围搬移到较高的频段以便在信道中传输</li>
<li>传输距离近时，计算机网络采用基带传输方式 (近距离衰减小，从而信号内容不易发生变化)<br />传输距离远时，计算机网络采用宽带传输方式 (远距离衰减大，即使信号变化大也能最后过滤出来基带信号)</li>
<li>数据编码生成数字信号，数据调制生成模拟信号<br />&emsp;数字数据经过数字发送器编码生成数字信号；数字数据经过调制器调制生成模拟信号<br />&emsp;模拟数据经过PCM编码器编码生成数字信号；模拟数据经过放大器调制器调制生成模拟信号</li>
<li>收发方同步：如果接收方连续收到相同的电平，无法分清刚刚收到的是几个信号，还要另开一条信道与发送方的时钟信号保持同步。</li>
</ol>
<h2 id="数字数据编码为数字信号"><a href="#数字数据编码为数字信号" class="headerlink" title="数字数据编码为数字信号"></a>数字数据编码为数字信号</h2><ol>
<li>非归零编码：高1低0。编码容易实现，但没有检错功能，且无法判断一个码元的开始和结束，以至于收发双方难以保持同步</li>
<li>归零编码：信号电平在一个码元之内都要恢复到零。大部分时间都是0，信道利用率低</li>
<li>反向不归零编码：信号电平翻转表示0，信号电平不翻转表示1。全1信号无法同步</li>
<li>曼切斯特编码：一个码元内从高电平跳变为低电平是1，从低电平跳变到高电平是0<br />可以实现自同步，但是占用的频带宽度好似原始的基带宽度的两倍<br />每一个码元都有两次跳变 (开始一次，从前一码元的后一电平跳变到当前码元的前一电平；中间一次，从当前码元的前一电平跳变到当前码元的后一电平)<br />比特率只有调制速率的$\displaystyle\frac12$</li>
<li>差分曼切斯特编码：在两个相邻码元之间，前一码元的后一电平与后一码元的前一电平相同就是1，相异就是0<br />每个码元的中间都有一个电平跳转，抗干扰性强于曼切斯特编码，常用于局域网传输</li>
<li>4B/5B编码：bit流中插入额外的bit以打破一连串的0或1，用5个bit来编码4个bit的数据。编码效率为80%<br />只采用16中对应16种不同的4位码，其他的16种作为控制码</li>
</ol>
<h2 id="数字数据调制为模拟信号"><a href="#数字数据调制为模拟信号" class="headerlink" title="数字数据调制为模拟信号"></a>数字数据调制为模拟信号</h2><ol>
<li>在发送端将数字信号转换为模拟信号，在接收端将模拟信号还原为数字信号，分别是调制解调器的调制和解调过程</li>
<li>调幅：0没有振幅，1有振幅</li>
<li>调频：0低频，1高频</li>
<li>调相：相位调制，余弦波和正线波</li>
<li>调幅+调相 (QAM)：若有$n$种相位，$m$种振幅，共有$nm$种码元</li>
</ol>
<h2 id="模拟数据编码为数字信号"><a href="#模拟数据编码为数字信号" class="headerlink" title="模拟数据编码为数字信号"></a>模拟数据编码为数字信号</h2><ol>
<li>常用的是PCM脉码调制，分为三步：抽样、量化、编码</li>
<li>抽样：对模拟信号周期性扫描，把时间上连续的信号变成时间上离散的信号<br />采样定理：$f_{采样频率}≥f_{信号最高频率}$</li>
<li>量化：把抽样取得的电平幅值按照一定的分级标度转化为对应的数字值，并取整数，把连续的电平幅值转换为离散的数字量</li>
<li>编码：把量化的结果转换为与之对应的二进制编码</li>
</ol>
<h2 id="模拟数据调制为模拟信号"><a href="#模拟数据调制为模拟信号" class="headerlink" title="模拟数据调制为模拟信号"></a>模拟数据调制为模拟信号</h2><ol>
<li>为实现传输的有效性，可能需要较高的频率</li>
<li>这种调制方式还可以使用频分复用技术，充分利用带宽资源</li>
</ol>
<h1 id="数据交换方式"><a href="#数据交换方式" class="headerlink" title="数据交换方式"></a>数据交换方式</h1><h2 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h2><ol>
<li>原理：在数据传输期间，源结点与目的结点之间有一条由中间节点构成的专用物理连接线路，在数据传输结束之前，这条线路一直保持</li>
<li>阶段：建立连接 (呼叫/电路建立)、通信 (数据传输)、释放连接 (拆除电路)</li>
<li>特点：独占资源，用户始终占用端到端的固定传输带宽</li>
<li>适用于远程批处理信息传输或系统间实时性要求高的大量数据传输</li>
<li>建立连接的时候，源结点会延路发送呼叫请求，目的结点收到请求后会延路返回呼叫应答<br />释放连接的时候，源结点会延路发送释放请求，目的结点收到请求后会延路返回释放应答</li>
<li>优点<br />&emsp;传输时延小<br />&emsp;数据顺序传送，无失序问题<br />&emsp;实时性强，双方一旦建立物理通路，便可以实时通信，适用于交互式会话类通信<br />&emsp;全双工通信，没有冲突，通信双方有不同的信道，不会争用物理信道<br />&emsp;适用于模拟信号和数字信号<br />&emsp;控制简单，电路的交换设备及控制较简单</li>
<li>缺点<br />&emsp;建立连接时间长<br />&emsp;线路独占，即使通信线路空闲，也不能供其他用户使用，信道使用效率低<br />&emsp;灵活性差，双方连接通信中任何一点出了故障，必须重新拨号建立连接，不适应突发性通信<br />&emsp;无数据存储能力，难以平滑通信量<br />&emsp;电路交换时，数据直达，不同类型、不同规格、不同速率的终端很难相互进行通信<br />&emsp;无法发现与纠正传输差错，难以在通信过程中进行差错控制</li>
</ol>
<h2 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h2><ol>
<li>报文：网络中交换与传输的数据单元，即站点一次性要发送的数据块。报文包含了将要发送的完整数据信息，其长短很不一致，长度不限且可变</li>
<li>原理：无需在两个站点之间建立一条专用通路，其数据传输的单位是报文，传送过程采用存储转发的方式</li>
<li>报文：信息+报头 (目的地址、源地址等)</li>
<li>每个节点收下整个报文后，暂存报文并检查有无错误</li>
<li>当所需要的输出电路空闲时，利用路由信息找到下一个结点地址，传送给下一个结点；若非空闲，先存储报文，待空闲时再发送</li>
<li>在两个通信用户间的其他线路段，可传输其他用户的报文，不像电路交换那样必须占用端到端的全部信道</li>
<li>优点<br />&emsp;无需建立连接，无需建立时延，用户可随时发送报文<br />&emsp;动态分配线路，动态选择报文通过的最佳路径，可以平滑通信量<br />&emsp;提高线路利用率，通信双方在不同的时间一段一段地部分占有这条物理通道，多个报文可共享信道<br />&emsp;提供多目标服务：一个报文可同时发往多个目的地址<br />&emsp;在存储转发中容易实现代码转换和速率匹配，甚至收发双方可以不同时处于可用状态。这样就便于类型、规格和速度不同的计算机之间进行通信</li>
<li>缺点<br />&emsp;实时性差，不适合传送实时或交互式业务的数据。数据进入交换结点后要经历存储转发过程，从而引发时延<br />&emsp;只适用于数字信号<br />&emsp;由于报文长度没有限制，而每个中间节点都要完整地接受传来的整个报文，当输出线路不空闲时，还可能要存储几个完整报文等待转发，要求网络中每个节点有较大的缓冲区。为了降低成本，减少结点的缓冲存储器的容量，有时要把等待转发的报文存在磁盘上，进一步增加了传送时延</li>
</ol>
<h2 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h2><ol>
<li>大多数计算机网络都不能连续地传送任意长的数据，所以实际上网络系统把数据分割成小块，然后逐块地发送</li>
<li>分组：小数据块+控制信息 (源地址、目的地址、编号)</li>
<li>工作方式与报文交换基本相同，都采用存储转发方式。但分组交换网中限制传输的数据单位的长度，一般是128B</li>
<li>相比报文交换的优点<br />&emsp;简化了存储管理，因为分组的长度固定，相应缓冲区的大小也固定，在交换结点中存储器的管理被简化为对缓冲区的管理，相对容易<br />&emsp;加速传输，后一个分组的存储可以比前一个分组的转发并行操作；传输一个分组比一份报文所需缓冲区小，减少等待发送时间<br />&emsp;减少出错几率和重发数据量，提高可靠性，减少传输时延<br />&emsp;分组短小，适用于计算机之间突发式数据通信</li>
<li>缺点<br />&emsp;尽管分组交换比报文交换的传输时延少，但仍存在存储转发时延，而且其结点交换机必须具有更强的处理能力<br />&emsp;每个分组都要加控制信息，一定程度上降低了通信效率，增加了处理的时间<br />&emsp;当分组交换采用数据报服务时，分组达到目的结点时，要对分组按编号进行排序等工作，增加了麻烦。若采用虚电路服务，虽无失序问题，但有呼叫连接、数据传输和虚电路释放三个过程</li>
</ol>
<h3 id="数据报方式"><a href="#数据报方式" class="headerlink" title="数据报方式"></a>数据报方式</h3><ol>
<li>过程<br />&emsp;源主机将报文分成多个分组，依次发送到直接相连的结点<br />&emsp;结点收到分组后，对每个分组差错检测，若正确则向上一结点发送确认信息，上一结点收到确认后丢弃分组副本<br />&emsp;结点进行路由选择，不同分组的下一跳结点可能不同<br /></li>
<li>数据报方式为网络层提供无连接服务。发送方可随时发送分组，网络中的结点可随时接受分组<br />无连接服务：不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同</li>
<li>同一报文的的不同分组达到目的结点时可能发生乱序、重复与丢失</li>
<li>每个分组在传输过程中都必须携带源地址、目的地址、分组号</li>
<li>分组在交换结点存储转发时，需要排队等候处理，这会带来一定的时延。当通过交换结点的通信量较大或网络发生拥塞时，这种时延会大大增加，交换结点还可根据情况丢弃部分分组</li>
<li>网络具有冗余路径，当某一交换结点或一段链路出现故障时，可相应地3更新路由表，寻找一条路径转发分组，对故障的适应能力强，适用于突发性通信，不适于长报文、会话式通信</li>
</ol>
<h3 id="虚电路方式"><a href="#虚电路方式" class="headerlink" title="虚电路方式"></a>虚电路方式</h3><ol>
<li>结合数据报方式和电路交换方式</li>
<li>虚电路：一条源主机到目的主机类似于电路的路径 (逻辑连接)，路径桑所有结点都要维持这条虚电路的建立，都维持一张虚电路表，每一项纪录了一个打开的虚电路的信息</li>
<li>每个分组携带虚电路号，分组号、检验和等控制信息，根据虚电路号还原报文，区分不同报文</li>
<li>虚电路方式为网络层提供连接服务。源结点与目的结点之间建立一条逻辑连接，而非实际物理连接<br />连接服务：首先为分组的传输确定传输路径 (建立连接)，然后沿该路径 (连接)传输系列分组，系列分组传输路径相同，传输结束后拆除连接</li>
<li>一次通信的所有分组都通过虚电路顺序传送，分组不需携带源地址、目的地址等信息，包含虚电路号，相对数据报方式开销小，同一报文的不同分组达到目的结点时不会乱序、重复或丢失</li>
<li>分组通过虚电路上的每个节点时，节点只进行差错检测，不进行路由选择</li>
<li>每个节点可能与多个节点之间建立多条虚电路，每条虚电路支持特点的两个端系统之间的数据传输，可以对两个数据端点的流量进行控制，两个端系统之间也可以有多条虚电路为不同的进程服务</li>
<li>当网络中的某个节点或某条链路出现故障而彻底失效时，则所有经过该结点或该链路的虚电路将遭到破坏</li>
</ol>
<h2 id="数据交换方式的选择"><a href="#数据交换方式的选择" class="headerlink" title="数据交换方式的选择"></a>数据交换方式的选择</h2><ol>
<li>传送数据量大，且传送时间远大于呼叫时，选择电路交换。电路交换传输时延最小</li>
<li>当端到端的通路有很多端的链路组成时，采用分组交换传送数据较为合适</li>
<li>从信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合于计算机之间的突发式数据通信</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2020/12/06/02-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%92%8C%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/06/02-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%92%8C%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B/" class="post-title-link" itemprop="url">02. 体系结构和参考模型</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-06 11:56:28" itemprop="dateCreated datePublished" datetime="2020-12-06T11:56:28+08:00">2020-12-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-27 21:40:21" itemprop="dateModified" datetime="2021-01-27T21:40:21+08:00">2021-01-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/" itemprop="url" rel="index">
                    <span itemprop="name">考研</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%80%83%E7%A0%94/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h1><ol>
<li>发送文件前要完成的工作：<br />发起通信的计算机必须将数据通信的通路进行激活<br />要告诉网络如何识别目标主机<br />查明目的主机是否开机，并且网络连接正常<br />弄清楚对方计算机中文件管理程序是否已经做好准备<br />确保差错和意外可以解决</li>
<li>分层的体系结构把大问题化为多个小问题逐一解决</li>
<li>实体：每一层中的活动对象<br />对等实体：同一层的实体</li>
<li>协议：对等实体之间的一系列规定<br />协议三部分：语法规定传输数据的格式，语义规定所要完成的功能，同步规定各种操作的顺序</li>
<li>接口：连接相邻两层之间的上层使用下层服务的逻辑入口<br />服务：下层为相邻上层提供的功能调用</li>
<li>分层的要求<br />各层之间相互独立，每层只实现一种相对独立的功能<br />每层之间界面自然清晰，易于理解，相互交流尽可能少<br />结构上可分割开，每层都采用最合适的技术实现<br />保持下层对上层的独立性，上层单向使用下层的服务<br />分层有助于标准化工作的进行</li>
<li>SDU服务数据单元：为完成用户所要求的功能而应传送的数据<br />PCI协议控制信息：控制协议操作的信息<br />PDU协议数据单元：对等层次之间传送的数据单元</li>
</ol>
<h1 id="参考模型"><a href="#参考模型" class="headerlink" title="参考模型"></a>参考模型</h1><h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><ol>
<li>OSI参考模型是法定标准</li>
<li>OSI模型由七层组成，自上而下依次是：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层</li>
<li>通信的两个端系统都要经历完整的七层，中间设备只要两层或三层<br />最上面四层无需中间设备参与，是端到端通信；下三层是点到点通信</li>
<li>数据的处理<br />物理层不对数据做处理，只转换成信号并传输 <br />发送端除物理层外的每层会把上层的传下来的数据添加一个首部，包装成该层的PDU。数字链路层除了首部还添加了一个尾部<br />接收端每层都把下一层传来的数据处理解码，去除发送端对应层添加的内容，再发送给上一层</li>
<li>应用层：所有能和用户交互产生网络流量的程序，即需要联网的应用程序<br />典型应用层服务：文件传输 (FTP协议)、电子邮件 (SMTP协议)、万维网 (HTTP协议)</li>
<li>表示层：处理在两个通信系统中交换信息的表示方式 (语法和语义)<br />功能：数据格式变换、数据加密解密、数据压缩和恢复</li>
<li>会话层：向表示层实体/用户进程提供建立连接并在连接上有序地传输数据<br />会话 / 建立同步 (SYN)：建立连接并有序传输<br />功能：建立、管理、终止会话、使用校验点可使会话在通信失效时从校验点 / 同步点继续恢复通信，实现数据同步<br />主要协议：ADSP、ASP</li>
<li>传输层：负载主机中两个进程的通信，即端到端的通信。端表示的是端口号<br />传输单位是报文段或用户数据报<br />功能：可靠传输、不可靠传输、差错控制、流量控制、复用分用<br />复用：多个应用层进程同时使用下面运输层的服务<br />分用：运输层把收到的信息依据端口号分别交给上面应用层中的相应进程<br />主要协议：TCP、UDP</li>
<li>网络层：把分组从原端传到目的端，为分组交换网上的不同主机提供通信服务<br />传输单位是数据报<br />功能：路由选择 (最佳路径)、流量控制、差错控制、拥塞控制<br />拥塞状态：所有节点都来不及接受分组，而要丢弃大量分组<br />主要协议：IP、IPX、ICMP、IGMP、ARP、RARP、OSPF</li>
<li>数据链路层：把网络层传下来的数据报组装成帧<br />传输单位是帧<br />功能：成帧 (定义帧的开始和结束)、差错控制 (帧错、位错)、流量控制、访问 (对信道的访问接入)控制 <br />主要协议：SDLC、HDLC、PPP、STP</li>
<li>物理层：在物理媒体上实现比特流的透明传输<br />传输单位是bit<br />透明传输：不管所传数据是什么样的bit组合，都应当能够在链路上传送<br />功能：定义接口特性、定义传输模式 (单工、半双工、双工)、定义传输速率、bit同步、bit编码<br />主要协议：Rj45、802.3</li>
</ol>
<h2 id="TCP-IP模型"><a href="#TCP-IP模型" class="headerlink" title="TCP/IP模型"></a>TCP/IP模型</h2><ol>
<li>TCP/IP模型是事实标准</li>
<li>TCP/IP模型有四层，自上而下分别是应用层、传输层、网际层、网络接口层</li>
<li>TCP/IP模型的应用层对应OSI模型的应用层、表示层、会话层，传输层对应传输层，网际层对应网络层，网络接口层对应数据链路层、物理层</li>
<li>面向连接三个阶段：$建立连接\rightarrow数据传输\rightarrow释放连接$<br />无连接直接数据传输</li>
<li>5层参考模型：自上而下分别是应用层、传输层、网络层、数据链路层、物理层</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">OSI模型</th>
<th style="text-align:center">TCP/IP模型</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">网络层</td>
<td style="text-align:center">无连接+面向连接</td>
<td style="text-align:center">无连接</td>
</tr>
<tr>
<td style="text-align:center">传输层</td>
<td style="text-align:center">面向连接</td>
<td style="text-align:center">无连接+面向连接</td>
</tr>
</tbody>
</table>
</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="LiyunZhang"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">LiyunZhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">204</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liyun Zhang</span>
</div>
<div class="BbeiAn-info">
       浙ICP备 -
    <a target="_blank" href="http://www.miitbeian.gov.cn/" style="color:#ffffff"  rel="nofollow">19047088号-1</a> <!--a标签中增加nofollow属性，避免爬虫出站。-->|
    <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011802001835" style="color:#ffffff;text-decoration:none;padding-left:30px;background:url(https://s1.ax1x.com/2018/09/29/ilmwIH.png) no-repeat left center" rel="nofollow">浙公网安备 33011802001835号</a>      <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->

</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
