<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://http://www.laughingtree.cn').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="LaughingTree">
<meta property="og:url" content="http://http//www.laughingtree.cn/page/3/index.html">
<meta property="og:site_name" content="LaughingTree">
<meta property="article:author" content="LiyunZhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://http//www.laughingtree.cn/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>LaughingTree</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LaughingTree</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags<span class="badge">29</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories<span class="badge">33</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/05/09/04-Data-Wrangling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/09/04-Data-Wrangling/" class="post-title-link" itemprop="url">04. Data Wrangling</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-05-09 16:21:26 / Modified: 16:21:52" itemprop="dateCreated datePublished" datetime="2022-05-09T16:21:26+08:00">2022-05-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/05/09/03-Vim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/09/03-Vim/" class="post-title-link" itemprop="url">03. Vim</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-05-09 10:55:04 / Modified: 15:20:00" itemprop="dateCreated datePublished" datetime="2022-05-09T10:55:04+08:00">2022-05-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/MIT-The-Missing-Semester-of-You-CS-Education/" itemprop="url" rel="index">
                    <span itemprop="name">MIT The Missing Semester of You CS Education</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Normal-mode"><a href="#Normal-mode" class="headerlink" title="Normal mode"></a>Normal mode</h1><p>Access when first start up vim or <code>esc</code> in other modes. This is for navigating around a file, reading things, going from file to file. </p>
<h2 id="Moving"><a href="#Moving" class="headerlink" title="Moving"></a>Moving</h2><ol>
<li><p>We can move our cursor with hjkl. <code>j</code> will move down, <code>k</code> will move up, <code>h</code> will move left, and <code>l</code> will move right</p>
</li>
<li><p><code>w</code> will move the cursor forward by one word, <code>b</code> will move the cursor backward by one word. <code>e</code> will move to the end of word. </p>
</li>
<li><p><code>0</code> will move to the beginning of the line, and <code>$</code> will move to the end of the line. <code>^</code> will move to the first non-empty character on the line. </p>
</li>
<li><p><code>Ctrl + u</code> and <code>Ctrl + d</code> will move up or down the entire page.<br><code>G (Cap)</code> will move to the end of the file. <code>gg</code> will move to the beginning of the file. </p>
</li>
<li><p><code>L (Cap)</code>, <code>M(Cap)</code>, and <code>H (Cap)</code> will move to the lowest, middle, and highest line shown on the screen. </p>
</li>
<li><p><code>f / t + character</code> will jump before or to the first <code>character</code> in that line behind the cursor, and <code>F / T (Cap) + character</code> will jump after or to the last character in that line before the cursor. </p>
</li>
<li><p>When the cursor is in a parenthesis, <code>%</code> can quikly move between the matching parentheses. </p>
</li>
<li><p>We can start searching with <code>/</code>. Then we can type in the text we want to search and press enter. The cursor will jump to the first matched pattern after the cursor.<br>If the first match is not what we want, we can use <code>n</code> to find the next one. </p>
</li>
</ol>
<h2 id="Editing"><a href="#Editing" class="headerlink" title="Editing"></a>Editing</h2><ol>
<li><p><code>o</code> and <code>O</code> will open a new line below or above the cursor and enter the insert move. </p>
</li>
<li><p><code>d</code> combined with movement commands will delete contents.<br><code>c</code> (change) combined with movement commands will also delete contens and enter the insert mode.<br><code>dd</code> and <code>cc</code> will act on the given line. </p>
</li>
<li><p><code>x</code> will delete the character in the cursor. </p>
</li>
<li><p><code>r + character</code> will replace the charater in the cursor to the given character. </p>
</li>
<li><p><code>u</code> and <code>Ctrl + R</code> will undo and redo the editing. If the last editing is entering the insert mode and editing something, vim will undo all the editing in the insert mode. But if you just used some commands in normal mode, vim will undo only the last command. </p>
</li>
<li><p><code>y</code> combined with movement command will copy contents (y for yank). <code>p</code> will paste contents. <code>yy</code> will copy the whole line. </p>
</li>
<li><p><code>~</code> will flip the case on the cursor. </p>
</li>
<li><p><code>.</code> will repeat the last editing command again. The commands here is the same as <code>u</code>. </p>
</li>
</ol>
<h2 id="Counting"><a href="#Counting" class="headerlink" title="Counting"></a>Counting</h2><ol>
<li><p>Counting can be use to do all those commands repeatedly. </p>
</li>
<li><p>Just type the times we want to repeat before the command. Even a number larger than 10 is supported. </p>
</li>
<li><p>For editing commands that requires extra movement commands, like <code>d</code>, the number could be either before the editing command, or between the editing command and movement command. </p>
</li>
</ol>
<h2 id="Modifier"><a href="#Modifier" class="headerlink" title="Modifier"></a>Modifier</h2><ol>
<li><p>There are two kind of modifiers <code>i</code> and <code>a</code>. They require symbols that have a match, like parentheses or quotes. </p>
</li>
<li><p><code>i</code> means the things inside the matched symbols, and those symbols are not included.<br><code>a</code> is justl ike <code>i</code>, but symbols included. </p>
</li>
<li><p>They can combine with editing commands. Move the cursor into the symbols and type <code>editing command + i/a + symbol</code></p>
</li>
</ol>
<h1 id="Other-Modes"><a href="#Other-Modes" class="headerlink" title="Other Modes"></a>Other Modes</h1><ol>
<li><p>Insert: access via <code>i</code> in normal mode. editing file</p>
</li>
<li><p>Replace: access via <code>R (Cap)</code></p>
</li>
</ol>
<h2 id="Visual-Mode"><a href="#Visual-Mode" class="headerlink" title="Visual Mode"></a>Visual Mode</h2><ol>
<li>To select the contents we want to copy more convenient, we can first move the cursor to the first or the last character we want, and use <code>v</code> to enter the visual mode. In visual mode, we can move cursor to select the contents between the current position and the position when we just entered. </li>
<li><code>V (cap)</code> will enter the visual-line mode, which will select the lines. </li>
<li><code>Ctrl + V</code> will enter the visual-block mode, which will select the rectangualer blocks of text with the original and current cursor being the upper-left and lower-right corner. </li>
<li>After the selection, we can use the commands in normal mode, which will act on the whole thing and turn back to normal mode. Frequently used commands like <code>y</code> and <code>~</code></li>
<li>Countings and modifiers are still supported. </li>
</ol>
<h2 id="Command-Line-Mode"><a href="#Command-Line-Mode" class="headerlink" title="Command Line Mode"></a>Command Line Mode</h2><ol>
<li><p>Command line: access via <code>:</code>. Line shell command, but type in vim command, which all starts with <code>:</code>. </p>
</li>
<li><p><code>:q</code> will quit vim, <code>:w</code> will save file</p>
</li>
<li><p><code>:help</code> will show the document of commands. And quit the document with <code>:q</code></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">help</span> :<span class="keyword">w</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Buffer and window is not always one-to-one correspondence. Each buffer can be opened in zero or more windows.<br>We can create multiple windows with command <code>:sp</code>, or create different tabs with <code>:tabnew</code>.<br><code>:q</code> will only close the current window, and <code>:qa</code> will close all the windows. </p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/05/08/02-Shell-Tools-and-Scripting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/08/02-Shell-Tools-and-Scripting/" class="post-title-link" itemprop="url">02. Shell Tools and Scripting</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-08 14:36:05" itemprop="dateCreated datePublished" datetime="2022-05-08T14:36:05+08:00">2022-05-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-09 10:54:42" itemprop="dateModified" datetime="2022-05-09T10:54:42+08:00">2022-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/MIT-The-Missing-Semester-of-You-CS-Education/" itemprop="url" rel="index">
                    <span itemprop="name">MIT The Missing Semester of You CS Education</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>Variables: In shell, we can assign variables and access them by adding a <code>$</code> before its name. When assigning a variable, there is no extra space.<br>We can assign the output of a command with <code>$()</code>. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">foo=bar</span><br><span class="line">foo=$(pwd)</span><br></pre></td></tr></table></figure>
</li>
<li><p>We can express a string with either double quotes or single quotes. The difference is that double quotes will replace the variables inside with their value, and single quotes will not do so. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo "Value is $foo" # result: Value is bar</span><br><span class="line">echo 'Value is $foo' # result: Value is $foo</span><br><span class="line"></span><br><span class="line">echo "We are in $(pwd)" # result: We are in /...</span><br><span class="line">echo 'We are in $(pwd)' # result: We are in $(pwd)</span><br></pre></td></tr></table></figure>
</li>
<li><p>We can define a shell function in a <code>.sh</code> file. After we ran the source command, we can use it as other shell commands. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source mcd.sh</span><br><span class="line">mcd xxx</span><br></pre></td></tr></table></figure>
</li>
<li><p>In shell commands, we can use <code>||</code> and <code>&amp;&amp;</code> to connect commands. Just like in C, only the left command of <code>||</code> gets an error, will the right command be executed. And only the left command of <code>&amp;&amp;</code> is correct, will the right command be executed.<br>Two commands can always be separated by a semi-colon. </p>
</li>
<li><p>```shell<br>true || echo “This will not be printed”<br>false &amp;&amp; echo “This will not be printed”</p>
<p>false || echo “This will be printed”<br>true &amp;&amp; echo “This will be printed”</p>
<p>true ; echo “This will be printed”<br>false ; echo “This will be printed”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">6. &#96;&#96;&lt;()&#96;&#96; can set the output of the command in parentheses as the input stream. </span><br><span class="line">   </span><br><span class="line">   &#96;&#96;&#96;shell</span><br><span class="line">   cat &lt;(ls) &lt;(ls ..)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>$0</code> is the name of the function, <code>$1</code> is the first parameter, and so on. <code>$?</code> and <code>$_</code> is the error code and the last argument of the previous command. <code>$#</code> is the number of given arguments. <code>$$</code> is the process ID. <code>$@</code> will expand to all arguments, and then we can use for-loop to traverse it </p>
</li>
<li><p>We can use <code>{}</code> to simply the arguments we write. They will be expand to multiple arguments being the string outside concatenated with strings inside.<br>We can also expand to a range like <code>{a..d}</code> (a and j included)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">project&#123;,1,2&#125;/src/test&#123;a..b&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> project/src/testa project/src/testb project1/src/testa projec1/src/testb project2/src/testa project2/src/testb</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>We can use <code>*</code> to match any string (even include the empty string). And we can use <code>?</code> to match one singel character. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls *.sh</span><br><span class="line">ls project?</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>shellcheck</code> can check the scripts we write. </p>
</li>
<li><p><code>find</code> command: It can find files recursively. It has may arguments which make it powerful.<br>After <code>find</code>, it can specify the path to begin the search. By default, the path will be the current space.<br>It will search according to the argement of <code>-name</code> (case sensitive) or <code>-iname</code> (case insensitive)<br><code>-type</code> can specify the type of file we want. <code>f</code> means regular files, <code>d</code> is directory, etc.<br><code>-exec</code> can tell the shell what do we want to do with those found files in the form of <code>command {} \</code>. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find . -name "*.c"</span><br><span class="line">find \home -type d -name "project?"</span><br><span class="line">find \usr\Developer -type d -name "tmp*" -exec rm -rf &#123;&#125; \</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>locate</code> command need to create a database of all files in the system. Then every time, it will search the database to find all paths that match the pattern.<br>When try to find a directory, it will not only list the path of the directory, it also will lists all the files in that directory. </p>
</li>
<li><p><code>grep</code> command will print all  lines in the input file that match the pattern. The first argument is the pattern string, and the second is the path of the file. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep torch *.py</span><br></pre></td></tr></table></figure>
</li>
<li></li>
<li><p><code>history</code> command can show all the commands we used before. </p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/05/06/01-The-Shell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/06/01-The-Shell/" class="post-title-link" itemprop="url">01. The Shell</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-06 14:53:14" itemprop="dateCreated datePublished" datetime="2022-05-06T14:53:14+08:00">2022-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-08 14:36:36" itemprop="dateModified" datetime="2022-05-08T14:36:36+08:00">2022-05-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/MIT-The-Missing-Semester-of-You-CS-Education/" itemprop="url" rel="index">
                    <span itemprop="name">MIT The Missing Semester of You CS Education</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>Command <code>echo</code> will print the parameter. </p>
</li>
<li><p>When a parameter is formed by multiple words, you can wrap them with double quotes or use a ‘\’ before space. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "Hello World"</span><br><span class="line">echo Hello\ World</span><br></pre></td></tr></table></figure>
</li>
<li><p>The variable <code>$PATH</code> contains all the paths on the machine that the shell will search for programs. Each time we run a shell command, it will search all the pahts to find a program with the same name as the command. </p>
</li>
<li><p>To find the path of a command or a program, we can use <code>which</code>. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which echo</span><br></pre></td></tr></table></figure>
</li>
<li><p>Different directories of a path is separated by forward slashes ‘/‘ in Linux or MacOS and back slashes ‘\’ in Windows.<br>All paths in Linux or MacOS starts from the same root, so they all begins with a ‘/‘. In Windows, they might start from different disks like C: or D:. </p>
</li>
<li><p><code>pwd</code> returns the present working directory. We can chage it with <code>cd</code>.<br>There are some special directories. ‘/‘ is the root director. ‘~’ is the home directory. ‘-‘ is the last directory you were in. </p>
</li>
<li><p>We can see all the files in the current directory with <code>ls</code>. It can also takes a parameter that is a path, and then we can see the files in that path.<br>With <code>ls -l</code>, it will show more details about files.<br>The first character of the first column is always ‘d’ or ‘-‘. If it is a ‘d’, then that file is a directory.<br>The rest 9 characters of the first column is the permissions of each users. The first 3 are for the owner of the file showed in the second column. The second 3 are for the group of users that own the file showed in the third column. The Third 3 are for everyone else.<br>‘r’ stands for read. For a directory, that means that if you are allowed to see which files are inside<br>‘w’ stands for write. For a directory, that means that if you are allowed to rename, create or remove files in that directory.<br>‘x’ stands for execution. For a directory, that means the if you are allowed to enter that directory. To enter a directory, you need all the executions of the its all parents and itself. </p>
</li>
<li><p><code>mv</code>: The first parameter is the old path, while the second is the new path. They are both full paths. When the paths only differ in the last file, it acts as renaming the old file.<br><code>cp</code>: Almost the same as <code>mv</code>, except it only copies the first file without deleting it.<br><code>rm</code>: It has only one parameter, and deletes that file. </p>
</li>
<li><p><code>rmdir</code>: Delete an empty directory. <code>rm</code> also cannot delete a non-empty directory, but we can use <code>rm -rf</code> to delete recursively.<br><code>mkdir</code>: It will create a directory. If it has multiple parameters separated by space, it will create one directory for each parameter. </p>
</li>
<li><p><code>cat</code>: It will print the contents of a file.<br><code>tail</code>: It will print the last n lines of the file. We can use <code>-n</code> to specify the number of lines. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -n1 hello.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>man</code>: It will show the manuscript of a command given as a parameter. </p>
</li>
<li><p><code>Ctrl + L</code> will clean the terminal. </p>
</li>
<li><p>We can assign the input stream to a specified file with left angle braket <code>&lt; file</code>, and assign the output stream with <code>&gt; file</code>. </p>
<p>When using <code>&gt; file</code>, it will delete the original contents. But when using <code>&gt;&gt; file</code>, it will just append new contents to the file.<br>When we assign the input stream of <code>cat</code> to a file, it will still print the contents of that file. If the input file is the same as the output file and we are using <code>&gt;&gt;</code>, it will cause a dead-loop. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo hello &gt; hello.txt</span><br><span class="line">cat &lt; hi.txt &gt;&gt; hello.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>The character <code>|</code> creates a pipe that uses the output of the left command as the input of the right command. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l / | tail -n1</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/05/02/00-Go-Crash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/02/00-Go-Crash/" class="post-title-link" itemprop="url">00. Go Crash</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-02 16:23:53" itemprop="dateCreated datePublished" datetime="2022-05-02T16:23:53+08:00">2022-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-03 11:54:47" itemprop="dateModified" datetime="2022-05-03T11:54:47+08:00">2022-05-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97-MIT-6-824/" itemprop="url" rel="index">
                    <span itemprop="name">分布式计算 (MIT 6.824)</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Go-Commands"><a href="#Go-Commands" class="headerlink" title="Go Commands"></a>Go Commands</h1><ol>
<li><p><code>go run xxx.go</code>: run a go file. </p>
</li>
<li><p><code>go install</code>: it will compile and create a executable file with the name being the same as the folder</p>
</li>
</ol>
<h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h1><ol>
<li><p>Use package in the first line just like Java. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br></pre></td></tr></table></figure>
</li>
<li><p>Import only one package with “”</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Every programs begins from a main function like C/C++</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"Hello World!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Variables-and-Constants"><a href="#Variables-and-Constants" class="headerlink" title="Variables and Constants"></a>Variables and Constants</h1><ol>
<li><p>In golang, “declared but not used” is an wrror not a warning</p>
</li>
<li><p>Declare a variable with keyword var. Not necessary to write the type when declared, when it can be inferred.<br>Although sometimes the inference can be ambiguous, and we want to specify it. The type of the variable is after the name, seperated by a space</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">1984</span> <span class="comment">// int</span></span><br><span class="line"><span class="keyword">var</span> age32 <span class="keyword">int32</span> = <span class="number">1984</span> <span class="comment">// int32</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Declare a constant with keyword const. A constant can be declared and not used.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isCool = <span class="literal">true</span></span><br><span class="line"><span class="comment">// isCool = false // This line will raise an error</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>The shorthand declaration can only be used inside a function.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size := <span class="number">1.3</span> <span class="comment">// The default type is float64</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>You can also declare or assign multiple variables within a line</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name, email := <span class="string">"Steve"</span>, <span class="string">"Steve@gmain.com"</span></span><br><span class="line">name, email = <span class="string">"John"</span>, <span class="string">"JohnWatson@yahoo.com"</span></span><br><span class="line"><span class="keyword">var</span> name_var, email_var = <span class="string">"John"</span>, <span class="string">"JohnWatson@yahoo.com"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Packages"><a href="#Packages" class="headerlink" title="Packages"></a>Packages</h1><ol>
<li><p>The package declared in the first line allows us to import the functions implemented below elsewhere. </p>
</li>
<li><p>Although the package can have a different name with the directory it is in. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/go_crash_course/03_package/</span></span><br><span class="line"><span class="keyword">package</span> main <span class="comment">// this is allowed</span></span><br></pre></td></tr></table></figure>
<p>But then this package cannot be imported by other files. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in another file</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"go_crash_course/03_package/main"</span></span><br><span class="line"><span class="comment">// This will raise an error:</span></span><br><span class="line"><span class="comment">//     "package go_crash_course/03_package/main is not in GOROOT"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Only the packages with the same name as their directory can be imported. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/go_crash_course/03_package/strutil</span></span><br><span class="line"><span class="keyword">package</span> strutil</span><br></pre></td></tr></table></figure>
<p>When import a local package, the current directory is src so the path starts from something in the src folder. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/go_crash_course/03_package/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"go_crash_course/03_package/strutil"</span></span><br></pre></td></tr></table></figure>
<p>And you cannot use a relative path to import. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/go_crash_course/03_package/</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./strutil"</span></span><br><span class="line"><span class="comment">// This will raise an error:</span></span><br><span class="line"><span class="comment">//    "./strutil" is relative, but relative import paths are not supported in module mode</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h1><ol>
<li><p>The implement of a function starts with a keyword <code>func</code>. The <code>{</code> must be in the same line as <code>func</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>The parameters are in the order of (name type). </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greeting</span><span class="params">(name <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line"> fmt.Printlln(<span class="string">"Hello "</span> + name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When we have multiple parameters with the same type, we can write their type only after the last paramater.<br>Some parameter can remain unsed in function. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(num1, num2 <span class="keyword">int</span>, num3 <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line"> fmt.Println(num1 + num2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>The type of return value is specified after the parameters. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greeting</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="string">"Hello "</span> + name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="Arrays-and-Slices"><a href="#Arrays-and-Slices" class="headerlink" title="Arrays and Slices"></a>Arrays and Slices</h1><ol>
<li><p>We can Declare an array similar to C/C++, just move the length before the type. And we can also access the elements with subscript. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruitArr [<span class="number">3</span>]<span class="keyword">string</span></span><br><span class="line">fruitArr[<span class="number">0</span>] = <span class="string">"Apple"</span></span><br><span class="line">fruitArr[<span class="number">1</span>] = fruitArr[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<p>We can delcare and assign an array with shorthand declaration</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fruitArr := [<span class="number">3</span>]<span class="keyword">string</span>&#123;<span class="string">"Apple"</span>, <span class="string">"Orange"</span>, <span class="string">"Grape"</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>We can declare a slice when we don’t specify the length of an array. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruitSlice []<span class="keyword">string</span></span><br><span class="line">fruitSliceShort := []<span class="keyword">string</span>&#123;<span class="string">"Apple"</span>, <span class="string">"Orange"</span>, <span class="string">"Grape"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>When we try to access a subscript out of the current length of a slice, an “index out of range” error will raise. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fruitSlice[<span class="number">0</span>] = <span class="string">"Apple"</span> <span class="comment">// error</span></span><br><span class="line">fruitSliceShort[<span class="number">3</span>] = <span class="string">"Cherry"</span> <span class="comment">// error</span></span><br></pre></td></tr></table></figure>
<p>However, we can change the length of a slice with <code>append</code> while an array cannot do so. </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fruitSlice = <span class="built_in">append</span>(fruitSlice, <span class="string">"Apple"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Some common operations of array and slice: print, length, access a range like Python</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(fruitArr)</span><br><span class="line">fmt.Println(fruitSlice)</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(fruitArr))</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(fruitSlice))</span><br><span class="line"></span><br><span class="line"><span class="comment">// [lo:hi] can access the elements with subscripts in [lo, hi)</span></span><br><span class="line">fmt.Println(fruitArr[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">fmt.Println(fruitSliceShort[<span class="number">1</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/04/20/03-Parallel-Programming-Basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/20/03-Parallel-Programming-Basics/" class="post-title-link" itemprop="url">03. Parallel Programming Basics</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-20 14:27:45" itemprop="dateCreated datePublished" datetime="2022-04-20T14:27:45+08:00">2022-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-21 19:47:35" itemprop="dateModified" datetime="2022-06-21T19:47:35+08:00">2022-06-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97-CMU-15-418-Stanford-CS149/" itemprop="url" rel="index">
                    <span itemprop="name">并行计算 (CMU 15-418 / Stanford CS149)</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Decomposition"><a href="#Decomposition" class="headerlink" title="Decomposition"></a>Decomposition</h1><ol>
<li><p>Decomposition: The problem to solve is usually a chunk of work. So the first step we need to do is to decomposite them into subproblems (a.k.a tasks, work to do)</p>
</li>
<li><p>We usually want the number subproblems to be at least as many as processors.</p>
</li>
<li><p>The key aspect of decomposition is to identify dependencies. We want subproblems to be independent, so that they can be paralleled. </p>
</li>
<li><p>Amdahl’s Law: dependencies limit maximum speedup due to parallelism<br>Let S = the fraction of sequential execution that is inherently sequential (dependencies prevent parallel execution). Then maximum speedup due to parallel execution ≤ 1/S. </p>
<script type="math/tex; mode=display">speedup \le\frac{t}{st+\frac{(1-s)t}{p}}=\frac1{s+\frac{1-s}{p}}</script></li>
<li><p>In most cases, the programmer is responsible for performing decomposition. </p>
</li>
<li><p>When we are doing the decomposition, it is better to think of partitioning computation instead of data. </p>
</li>
</ol>
<h1 id="Assignment"><a href="#Assignment" class="headerlink" title="Assignment"></a>Assignment</h1><ol>
<li><p>Assignment: When the subproblems is more than processors, we then will group them together to form a larger chunk of work, and assign the grouped tasks to parallel threads. </p>
</li>
<li><p>One goal is to balance workload, so that each processor finish their work almost at the same time.<br>Another goal is to reduce communication costs. Getting data from another processor is nontrivial expensive, either cache miss or waiting for a message.<br>These two goals are at odds with each other. </p>
</li>
<li><p>This step can be performed statically, or dynamically during execution<br>Static way: Before the processors begin to do the work, we have already decide how to divide things up.<br>Dynamic way: We work out the way to divide on the way as processing. </p>
</li>
<li><p>We can choose the static way with the programCount and programIndex assignment or pthread</p>
</li>
<li><p>We can choose the dynamic way with foreach if the system choose the dynamic way, or the queue<br>In the queue way, we arrange all tasks in a queue, and when a processor has done its job, it will grab another task from the queue. This is a good way for balancing workload, but maintain the queue and acquire task from it might cost some performance. </p>
</li>
</ol>
<h1 id="Orchestration"><a href="#Orchestration" class="headerlink" title="Orchestration"></a>Orchestration</h1><ol>
<li><p>Orchestration: When parallel threads are running, they may need to coorperate with each other. So we need to let them communicate correctly. </p>
</li>
<li><p>There are things that we will worry about, like structure communication, synchronization, orgnizing data structure in memory, and scheduling tasks</p>
</li>
<li><p>The goal is to reduce costs of communication/sync, preserve locality of data reference, reduce overhead of synchronization or communication, etc.</p>
</li>
<li><p>In shared address space model, lock/unlock is common used for preserving atomicity, and barriers can divide computation into phases. When threads execute to barriers, they will stop and wait. Until enough number of threads hit the barrier, those stalled threads are allowed to execute rest codes. </p>
</li>
<li><p>A common used optimization strategy is that try to use less lock/unlock and barriers.<br>Everytime when we operate a shared variable, we need to use the lock/unlock to keep atomicity. But maybe we can operate on partial variable locally and then merge the partial results together.<br>When we use barrier to keep a shared variable valid when it might be changed at the next phase, we can use different shared variable in successive phases. This is to trade off footprint for removing dependencies. </p>
</li>
</ol>
<h1 id="Mapping"><a href="#Mapping" class="headerlink" title="Mapping"></a>Mapping</h1><ol>
<li><p>Mapping: Finally, we need to map each thread to physical hardware. </p>
</li>
<li><p>When we map pthreads to hardware execution context on a CPU core, this is done by the operating system<br>When we map ISPC program instances to vector instruction lanes, this is done by the compiler<br>When we map CUDA thread blocks to GPU cores, this is done by the hardware</p>
</li>
<li><p>Place related threads (cooperating threads) on the same processor to maximize locality, data sharing, minimize costs of comm/sync<br>Place unrelated threads on the same processor (one might be bandwidth limited and another might be compute limited) to use machine more efficiently</p>
</li>
<li><p>Normally, we just let the OS do the mapping as it want. But sometimes we still want to control the way of mapping.</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/04/18/02-Parallel-programming-models/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/18/02-Parallel-programming-models/" class="post-title-link" itemprop="url">02. Parallel programming models</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-18 11:53:04" itemprop="dateCreated datePublished" datetime="2022-04-18T11:53:04+08:00">2022-04-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-03 15:40:40" itemprop="dateModified" datetime="2022-05-03T15:40:40+08:00">2022-05-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97-CMU-15-418-Stanford-CS149/" itemprop="url" rel="index">
                    <span itemprop="name">并行计算 (CMU 15-418 / Stanford CS149)</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ISPC-Intel-SPMD-Program-Compiler"><a href="#ISPC-Intel-SPMD-Program-Compiler" class="headerlink" title="ISPC (Intel SPMD Program Compiler)"></a>ISPC (Intel SPMD Program Compiler)</h1><h2 id="Format-of-ISPC"><a href="#Format-of-ISPC" class="headerlink" title="Format of ISPC"></a>Format of ISPC</h2><ol>
<li><p>ISPC is an SPMD compiler, not an SIMD. </p>
</li>
<li><p>The code that need to be paralleled will be written in a file with surfix of “.ispc” as a function. And we will call that function in the main.cpp.<br>Call to ISPC function spawns gang of ISPC program instances. All instances run ISPC code concurrently. The ISPC function will return when all instances have completed.<br>All code in main.cpp will be executed sequentially. </p>
</li>
<li><p><code>programCount</code>: the number of simultaneously executing instances in the gang. It is the same for all instances, thus called “uniform value”. This is not set by programmer, but by the run-time system. programmer can only read it but don’t set that. </p>
</li>
<li><p><code>programIndex</code>: the ID of the current instance in the gang. It is a non-uniform value, namely varying.<br>This is used to assign work to each instance. If we don’t use the programIndex to control the work to be done by each instance, they will all do all the work. Thus there will be redundant and have no performance improve. </p>
</li>
<li><p><code>uniform</code>: a type modifier. All instances have a copy of the same value for this variable. Its use is purely an optimization. Not needed for correctness.<br>We cannot add a non-uniform value to a uniform value directly, which will cause a compile-time type error. In order to do so, we need a reduce_add function from ISPC library. </p>
</li>
<li><p>Those ISPC program instances is not separate threads. The ISPC complier actually generates an SIMD thread. So the programCount is the vector width of the machine.<br>So it can only run on one core. And “task” is used to achieve multi-core execution.</p>
</li>
</ol>
<h2 id="Ways-of-assignment"><a href="#Ways-of-assignment" class="headerlink" title="Ways of assignment"></a>Ways of assignment</h2><ol>
<li><p>Interleaved assignment: the data processed by each instance is discontinuous, namely the subsctipt is: </p>
<script type="math/tex; mode=display">programIndex+i\times programCount,i\in[0,\frac{N-programIndex}{programCount})</script></li>
<li><p>Block assignment: the data is split into several chunks, and each instance process one chunk. So the data is continuous, namely the subscript is: </p>
<script type="math/tex; mode=display">programIndex\times count+i, i\in[0,count),count=\frac{N}{programCount}</script></li>
<li><p>When using the block assignment, there might exist some situation when the cost of processing later data is more expensive than processing former data, which will make the assignment uneven. So the interleaved assignment is less risky. </p>
</li>
<li><p>Since ISPC only generate one thread, the continuous access of data in block assignment is not more cache-friend then the discontinuous access in interleaved assignment.<br>If there are several threads, than block assignment might be more cache-friend. </p>
</li>
<li><p>The data requested by all instances at the same time is a vector. In interleaved assignment, the data in a vector is memory continuous, while it is not in block assignment. So in memory access, interleaved assignment is faster. </p>
</li>
<li><p><code>foreach (i = 0 ... N)</code> says that these loop iterations can be paralleled, and ISPC implementation assigns iterations to program instances in gang. Current ISPC implementation will perform a static interleaved assignment</p>
</li>
</ol>
<h2 id="System-layers"><a href="#System-layers" class="headerlink" title="System layers"></a>System layers</h2><ol>
<li><p>The layers from up to down is that parallel applications, compilers and/or parallel runtime, operating system, Micro-architecture (hardware implementation)</p>
</li>
<li><p>Different parallel models can have different combinations of concerned layers. </p>
</li>
<li><p>If we express parallelism with pthread, it goes through all layers. First the parallel application calls <code>pthread_create()</code> to access pthread library implementation. Then the pthread library uses <code>System call API</code> to ask OS support: kernel thread management. Finally, the OS uses <code>x86-64</code> to control modern multi-core CPU. </p>
</li>
<li><p>If we express parallelism with ISPC without “task”, it doesn’t need the support of OS. The parallel application uses ISPC language to ask for service of ISPC compiler. And the complier will produce machine language of x86-64 including <code>AVX vector instruction</code> to control a single-core of CPU. </p>
</li>
</ol>
<h1 id="Communication"><a href="#Communication" class="headerlink" title="Communication"></a>Communication</h1><h2 id="Shared-Address-Space"><a href="#Shared-Address-Space" class="headerlink" title="Shared Address Space"></a>Shared Address Space</h2><ol>
<li><p>The whole machine has a common space address. When threads aren’t working together, they just access their memory space. They can communicate with each by reading or writing the same data and manipulating synchronization primitives (like locks)</p>
</li>
<li><p>This model requires hardware support to implement efficiently. In hardware implementation, any processor can directly reference any memory location</p>
</li>
<li><p>Symmetric (shared-memory) multi-processor (SMP): all processors have uniform memory access time, namely the cost of accessing an uncached memory address is the same for all processors<br>This is unscalarable since the access latency will increase fast with more and more processors and memory chips.<br>The cores can share memory through a shared L3 cahce or a crossbar switch with die area of one core</p>
</li>
<li><p>Non-uniform memory access (NUMA): All processors can access any memory location, but the cost of memory access (latency and/or bandwidth) is different for different processors. Each processor has a memory chip that is close to it.<br>This is more scalarable since the low latency and high bandwidth to local memory.<br>Cost is the increased programmer effort for performance tuning. Finding, exploiting locality is important to performance (want most memory accesses to be to local memories)</p>
</li>
</ol>
<h2 id="Message-Passing"><a href="#Message-Passing" class="headerlink" title="Message Passing"></a>Message Passing</h2><ol>
<li><p>Threads operate within their own private address spaces, and they communicate by sending/receiving messages</p>
</li>
<li><p>send: specifies recipient, buffer to be transmitted, and optional message identifier (“tag”)<br>receive: sender, specifies buffer to store data, and optional message identifier</p>
</li>
<li><p>With this model, we can easily build large scale of parallel machine by just interconnect them together. Hardware need not implement system-wide loads and stores to execute message passing programs, need only be able to communicate messages<br>But the interconnect speed can be the bottleneck of the system. </p>
</li>
<li><p>We can implement the message passing model with shared memory space.<br>Sending message is copying memory from message library buffers, while receiving message is copying data from message library buffers</p>
</li>
<li><p>We can also implement shared address space abstraction on machines that do not support it in hardware via less efficient software solution.<br>Mark all pages with shared variables as invalid at first, and page-fault handler issues appropriate network requests</p>
</li>
<li><p>Synchronous (blocking) send and receive<br>Send(): call returns when sender receives acknowledgement that message data resides in address space of receiver<br>Recv(): call returns when data from received message is copied into address space of receiver and acknowledgement sent back to sender<br>So when using message passing model, we need to be careful for the order of send() and recv() in each threads because it may easily raise a deadlock.<br>If the first call of all threads is send(), then no one is receiving and all is waiting someone to receive what they have sent.<br>One common way to program is to arrage one thread to send first and the receiver of that send to receive first. </p>
</li>
<li><p>Non-blocking asynchronous send/recv<br>Send() call returns immediately, while recv() posts intent to receive in the future and returns immediately.<br>We can use checksend(), checkrecv() to determine actual status of send/receipt.<br>Buffer provided to send() cannot be modified by calling thread since message processing occurs concurrently with thread execution</p>
</li>
</ol>
<h2 id="Data-Parallel"><a href="#Data-Parallel" class="headerlink" title="Data Parallel"></a>Data Parallel</h2><ol>
<li><p>Data parallel has a very rigid computation struture. If it works well, it will work very well. But sometimes it just won’t work. </p>
</li>
<li><p>Nowadays, data parallel usually takes the form of SPMD instead of SIMD. Programs perform same function on different data elements in a collection<br><code>map(function, collection)</code>: Synchronization is implicit at the end of the map. Map returns when function has been applied to all elements ofcollection</p>
</li>
<li><p>When the function is too complicated, the result might be non-deterministic.<br>Data-parallel model (foreach) provides no specification of order in which iterations occur and no primitives for fine-grained mutual exclusion/synchronization.</p>
</li>
<li><p>Streams: collections of elements. Elements can be processed independently.<br>Kernels: side-effect-free functions. Operate element-wise on collections. </p>
</li>
<li><p>A stream can be claimed by <code>stream&lt;ElemType&gt; name(N)</code><br>When define the kernel function, its parameters are single elements instead of a whole collection. But when call the kernel function, we pass the streams into the function directly. </p>
</li>
<li><p>Benefits of stream programming:<br>Functions really are side-effect free (cannot write a non-deterministic program)<br>Program data flow is known by compiler: Inputs and outputs of each invocation are known in advance and thus prefetching can be employed to hide latency.<br>When there are multiple kernels, and the output of the last kernel is the input of the next kernel, producer-consumer locality is known in advance.<br>Implementation can be structured so outputs of first kernel are immediately processed by second kernel. The values are stored in on-chip buffers/caches and never written to memory, which saves bandwidth.<br>These optimizations are responsibility of stream program compiler. Requires global program analysis.</p>
</li>
<li><p>Drawback of stream programming: Need library of operators to describe complex data flows, so it might go wrong. </p>
</li>
<li><p><code>stream_gather(input, indices, tmp_input)</code>: Put elements in input to tmp_input according to indices. This is called before the kernel function, and the kernel function will deal with gathered stream.<br><code>stream_scatter(tmp_output, indices, output)</code>: Similar to stream_gather, but it is called after the kernel function, and kernel function will deal with original stream.<br>The parameters of both function are all stream. </p>
</li>
</ol>
<h2 id="Synchronization-and-Communication"><a href="#Synchronization-and-Communication" class="headerlink" title="Synchronization and Communication"></a>Synchronization and Communication</h2><ol>
<li><p>In shared address space, mutual exclusion is required for shared variables, and barriers are used to express dependencies between phases of computation.<br>They can communicate through implicit loads/stores to shared variables. </p>
</li>
<li><p>In message passing model, the synchronizations and communications are both performed by sending and receiving messages. </p>
</li>
<li><p>In data parallel model, a single logical thread is in control, but iterations of forall loop may be parallelized by the system. There is an implicit barrier at end offorallloop body.<br>They can also communicate throught implicit loads and stores, like shared address space. There is also some special built-in primitives for more complex communication patterns, e.g., reduce</p>
</li>
</ol>
<h2 id="Modern-practice"><a href="#Modern-practice" class="headerlink" title="Modern practice"></a>Modern practice</h2><ol>
<li><p>Use shared address space programming within a multi-core chip of a cluster, use message passing between chips<br>Use convenience of shared address space where it can be implemented efficiently (within a chip), require explicit communication elsewhere. </p>
</li>
<li><p>Data-parallel-ish programming models support shared-memory style synchronization primitives in kernels. This could permit limited forms of inter-iteration communication. </p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/04/13/01-Modern-Multicore-Processors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/13/01-Modern-Multicore-Processors/" class="post-title-link" itemprop="url">01. Modern Multicore Processors</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-13 15:48:23" itemprop="dateCreated datePublished" datetime="2022-04-13T15:48:23+08:00">2022-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-17 15:35:57" itemprop="dateModified" datetime="2022-05-17T15:35:57+08:00">2022-05-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97-CMU-15-418-Stanford-CS149/" itemprop="url" rel="index">
                    <span itemprop="name">并行计算 (CMU 15-418 / Stanford CS149)</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Speedup"><a href="#Speedup" class="headerlink" title="Speedup"></a>Speedup</h1><ol>
<li>Speedup (using P processors) = execution time (using 1 processor) / execution time (using P processors)</li>
<li>When using P processors, we can only get a speedup less than P times.<br>One reason is that although cores are in the same chip, when they want to communicate with each other, they have to transmit information through wires, which takes some time.<br>Another reason is that the imbalance in work assignment, which caused that one core has too heavy assignment while other cores has nothing to do but wait.<br>Communication costs can dominate a parallel computation, severely limiting speedup. Especially when you assign tasks to too many cores, each core gets little computation. </li>
</ol>
<h1 id="Parallelism"><a href="#Parallelism" class="headerlink" title="Parallelism"></a>Parallelism</h1><p>Why parallelism?<br>Before 2004, the performance of single-processor grew exponentially. However, in 2004, Intel hit the Power Density Wall. If you get more than 100 watts in a chip, it goes to hot and will melt. And the battery won’t hold long.</p>
<h2 id="ILP"><a href="#ILP" class="headerlink" title="ILP"></a>ILP</h2><ol>
<li>Instruction-Level Parallelism. Extract several instructions from the same instruction stream, and multiple ALU performs multiple operations parallel (within a core). This has to be done in a semantics of program. </li>
<li>Superscalar processor: exploit ILP within an instruction stream. Parallelism automatically and dynamically discovered by the hardware during execution (not programmer visible)</li>
<li>Example: Pentium 4<br>Its inctruction decoder will yank a whole bunch of instructions out of instruction stream, and map them to a new kind of computation called data flow computation that will track which value is generated and feed which instruction there<br>Decoders map them to independent processing units that can each performs a subset of the whole operations.<br>Control logics try to predict what’s going on and deal with it when it predicts incorrectly. The Branch Target Buffer keeps a record of all the control flow instructions to predict where they will go again. If it predicts wrong, it will back out and doesn’t commit to those results generated, flushes them away<br>Meltdown inspector: This logic leaks informations about what other processors are doing. </li>
<li>Most available ILP is exploited by a processor capable of issuing four instructions per clock, and only little performance benefit from building a processor that can issue more. </li>
</ol>
<h2 id="Multi-Core"><a href="#Multi-Core" class="headerlink" title="Multi-Core"></a>Multi-Core</h2><p>Before multi-core era, Majority of chip transistors used to perform operations that help a single instruction stream run fast.<br>More transistors mean larger cache, smarter out-of-order logic, smarter branch predictor, etc. Also, more transistors get smaller transistors, and thus higher clock frequencies</p>
<h3 id="Simpler-cores"><a href="#Simpler-cores" class="headerlink" title="Simpler cores"></a>Simpler cores</h3><ol>
<li>It uses increasing transistor count to add more cores to the processor, rather than use transistors to increase sophistication of processor logic that accelerates a single instruction stream (e.g., out-of-order and speculative operations)</li>
<li>Each core is slower at running a single instruction stream than our original large core, but the sum performance is faster. With a smaller core, the communication cost inside of a chip will be cheaper. </li>
<li>However, the original programs express no parallelism and run as one thread on one of the processor cores.</li>
<li>One way to express paralllelism is by using pthreads. It will create threads to deal with tasks we assigned. </li>
<li>Another way is called data-parallele expression. The programmer declare loop iterations to be independent, and a compiler might automatically generate parallel threaded code</li>
</ol>
<h3 id="SIMD-processing"><a href="#SIMD-processing" class="headerlink" title="SIMD processing"></a>SIMD processing</h3><ol>
<li>Amortize cost/complexity of managing an instruction stream across many ALUs. Same instruction broadcast to all ALUs, executed in parallel on all ALUs</li>
<li>Each core has  an independent vector register set different from the regular register set. And Each core has multiple ALUs to execute the same instruction to different data. </li>
<li>Only a very structual, carefully written code can do an automatical vectorization by compliers. </li>
<li>When conditional executions are occurred, it will run the condition first, and create a mask according to the result, which is used to disable the ALUs that should not execute current instructions. Those active ALUs will execute the instructions, and a new mask is created. This procession will continue until all ALUs have execute all conditional instructions they should execute, and then they can execute remaining unconditional codes together again.<br>When a core can handle n elements at the same time, the performance in the worst case is 1 / n of the peak performance. </li>
<li>Instruction stream coherence (“coherent execution”): Same instruction sequence applies to all elements operated upon simultaneously.<br>“Divergent” execution: A lack of instruction stream coherence</li>
<li>Coherent execution is necessary for efficient use of SIMD processing resources. However, coherent execution is not necessary for efficient parallelization across cores, since each core has the capability to fetch/decode a different instruction stream</li>
</ol>
<h4 id="SIMD-on-modern-CPUs"><a href="#SIMD-on-modern-CPUs" class="headerlink" title="SIMD on modern CPUs"></a>SIMD on modern CPUs</h4><ol>
<li>SSE instructions: 128-bit operations: 4x32 bits or 2x64 bits (4-wide float vectors)<br>AVX instructions: 256 bit operations: 8x32 bits or 4x64 bits (8-wide float vectors)<br>AVX512 instructions: 512 bit operations: 16x32 bits or 8x64 bits (8-wide float vectors)</li>
<li>Instructions are generated by the complier. Parallelism is explicitly requested by programmer using intrinsics, and conveyed using parallel language semantics. Finally, it is inferred by dependency analysis of loops by “auto-vectorizing” compiler. </li>
<li>Explicit SIMD: SIMD parallelization is performed at compile time. We can inspect program binary and see SIMD instructions. </li>
</ol>
<h4 id="SIMD-on-modern-GPUs"><a href="#SIMD-on-modern-GPUs" class="headerlink" title="SIMD on modern GPUs"></a>SIMD on modern GPUs</h4><ol>
<li>In GPUs, it usually is SPMD (Single Program Multiple Data), and uses SIMD to implement much of the logic. </li>
<li>Implicit SIMD: Compiler generates a scalar binary (scalar instructions). But N instances of the program are <em>always run</em> together on the processor. In other words, the interface to the hardware itself is data-parallel. </li>
<li>Hardware (not compiler) is responsible for simultaneously executing the same instruction from multiple instances on different data on SIMD ALUs</li>
<li>SIMD width of most modern GPUs ranges from 8 to 32</li>
</ol>
<h1 id="Access-Memory"><a href="#Access-Memory" class="headerlink" title="Access Memory"></a>Access Memory</h1><ol>
<li>Memory latency: The amount of time for a memory request (e.g., load, store) from a processor to be serviced by the memory system. Memory “access time” is a measure of latency. </li>
<li>Memory bandwidth: The rate at which the memory system can provide data to a processor</li>
<li>Stall: A processor “stalls” when it cannot run the next instruction in an instruction stream because of a dependency on a previous instruction. Accessing memory is a major source of stalls</li>
<li>One way to reduce stall is reducing latency.<br>One stratege is cache, which also provides high bandwidth data transfer to CPU. </li>
<li>Another way is hiding latency, namely the latency of the memory operation is not changed, it just no longer causes reduced processor utilization.<br>One common strategy is the prefetch. All modern CPUs have logic for prefetching data into caches. Prefetching can also reduce performance if the guess is wrong (hogs bandwidth, pollutes caches)<br>The other is using multi-threading. The idea is to interleave processing of multiple threads on the same core to hide stalls.</li>
</ol>
<h2 id="Multi-threading"><a href="#Multi-threading" class="headerlink" title="Multi-threading"></a>Multi-threading</h2><ol>
<li>Key idea of throughput-oriented systems is that potentially increase time to complete work by any one thread, in order to increase overall system throughput when running multiple threads.<br>There exists some time when one thread is runnable, but it is not being executed by the processor, since the core is running some other thread.</li>
<li>With more storing executiong contexts in the cache, the working set per thread is smaller, and the latency hiding ability is higher.<br>And since the cache space per thread is less, may go to memory more often. Thus relies heavily on memory bandwidth.<br>When the thread is much enough to achieve 100% utilization of the core, additional threads yield no benefit. </li>
<li>The instruction decoder will choose instructions from multiple threads, and fire them to the execution units the threads shared. And the memory interface unit will detect dependencies automatically.</li>
<li>Interleaved multi-threading (a.k.a. temporal multi-threading): Each clock, the core chooses a thread, and runs an instruction from the thread on the ALUs</li>
<li>Simultaneous multi-threading (SMT): Each clock, core chooses instructions from multiple threads to run on ALUs. It is an extension of superscalar CPU design</li>
<li>The operating system is responsible for mapping your pthreads to the processor’s thread execution contexts</li>
</ol>
<h2 id="CPUs-and-GPUs"><a href="#CPUs-and-GPUs" class="headerlink" title="CPUs and GPUs"></a>CPUs and GPUs</h2><ol>
<li>CPU has big caches, few threads, modest memory BW, and rely mainly on caches and prefetching.<br>GPU has small caches, many threads, huge memory BW, and rely mainly on multi-threading. </li>
<li>The bandwidth of GPUs is a lot faster than CPUs. </li>
<li>In GPUs, ALUs run at twice the clock rate of rest of chip. So each decoded instruction runs on 32 pieces of data on the 16 ALUs over two ALU clocks. (but to the programmer, it behaves like a 32-wide SIMD operation)<br>Warp: An instruction operating on a whole vector of data at a time.<br>SM: Streaming Multi-processor. Each SM has multiple warp selector. Each selector has multiple ALUs with different functions. The selectors in the same SM have shared momery and L1 cache. And all selectors can run parallel. </li>
<li>A core can have multiple scalar ALUs and multiple vector ALUs. Each vector ALU can perform either both MUL and ADD or ADD only.<br>And the maximum number of threads activated in a core is determined by the number of the execution contexts. </li>
</ol>
<h2 id="Bandwidth"><a href="#Bandwidth" class="headerlink" title="Bandwidth"></a>Bandwidth</h2><ol>
<li>If processors request data at too high a rate, the memory system cannot keep up. No amount of latency hiding helps this.</li>
<li>Organize computation to fetch data from memory less often.<br>Reuse data previously loaded by the same thread (traditional intra-thread temporal locality optimizations).<br>Share data across threads (inter-thread cooperation)</li>
<li>Request data less often (instead, do more arithmetic: it’s “free”).<br>Arithmetic intensity: Ratio of math operations to data access operations in an instruction stream.<br>The main point is that programs must have high arithmetic intensity to utilize modern processors efficiently.<br>If a data needed can be recalculated in ALUs, than don’t access memory, do the calculation. </li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/03/05/03-Perceptron-Generalized-Linear-Model/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/05/03-Perceptron-Generalized-Linear-Model/" class="post-title-link" itemprop="url">03. Perceptron & Generalized Linear Model</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-03-05 11:09:32 / Modified: 12:16:48" itemprop="dateCreated datePublished" datetime="2022-03-05T11:09:32+08:00">2022-03-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Stanford-CS229/" itemprop="url" rel="index">
                    <span itemprop="name">机器学习 (Stanford CS229)</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Perceptron"><a href="#Perceptron" class="headerlink" title="Perceptron"></a>Perceptron</h1><ol>
<li><p>$g(z)=\left\{\begin{matrix}1&amp;z≥0\\0&amp;z&lt;0\end{matrix}\right.$</p>
</li>
<li><p>Real - Gaussion</p>
<p>Binary - Bernoulli</p>
<p>count - Poisson</p>
<p>R+ - Gamma, Exponential</p>
<p>Probability distributions - Beta</p>
</li>
<li></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://http//www.laughingtree.cn/2022/03/03/02-Logistical-Regression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="LiyunZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LaughingTree">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/03/02-Logistical-Regression/" class="post-title-link" itemprop="url">02. Logistical Regression</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-03 21:26:38" itemprop="dateCreated datePublished" datetime="2022-03-03T21:26:38+08:00">2022-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-04 22:19:47" itemprop="dateModified" datetime="2022-03-04T22:19:47+08:00">2022-03-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">计算机科学与技术</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Stanford-CS229/" itemprop="url" rel="index">
                    <span itemprop="name">机器学习 (Stanford CS229)</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Locally-weighted-regression"><a href="#Locally-weighted-regression" class="headerlink" title="Locally weighted regression"></a>Locally weighted regression</h1><ol>
<li><p>Parametric learning algorithm: fit fixed set of parameters $(\Theta_i)$ to data</p>
<p>Non-parametric learning algorithm: the amount of data / parameters you need to keep grows linearly with size of data</p>
</li>
<li><p>Linear Regression: Fit $\Theta$ to minimize $\frac12\displaystyle\sum^M_{i=1}(y^{(i)}-\Theta^Tx^{(i)})^2$, and return $\Theta^Tx$</p>
<p>Locally weightted regression: Fit $\Theta$ To minimize $\displaystyle\sum^M_{i=1}w^{(i)}(y^{(i)}-\Theta^Tx^{(i)})^2$, where $w^{(i)}$ is a “weighted” function $w^{(i)}=exp(-\displaystyle\frac{(x^{(i)}-x)^2}{2\tau^2})$. If $|x^{(i)}-x|$ is small, $w^{(i)}\thickapprox1$, and if $|x^{(i)}-x|$ is large, $w^{(i)}\thickapprox0$</p>
</li>
<li><p>The net effect of locally weighted regression is that pay less attention to the examples that is far from the prediction one, and pay more attention to the one that is close. </p>
</li>
<li><p>$\tau$ is a hyperparameters to decide the bandwidth that we care much. It affects about overfit and unfit. </p>
</li>
<li><p>Why least squares?</p>
<p>Assume $y^{(i)}=\Theta^Tx^{(i)}+\epsilon^{(i)}$, where $\epsilon^{(i)}$ is the error that I.I.D. $N(0,\sigma^2)$</p>
<p>$P(\epsilon^{(i)})=\displaystyle\frac1{\sqrt{2\pi}\sigma}exp(-\frac{(\epsilon^{(i)})^2}{2\sigma^2})$, substitute $\epsilon^{(i)}=y^{(i)}-\Theta^Tx^{(i)}$ to get $P(y^{(i)}|x^{(i)};\Theta)=\displaystyle\frac1{\sqrt{2\pi}\sigma}exp(-\frac{(y^{(i)}-\Theta^Tx^{(i)})^2}{2\sigma^2})$, namely $y^{(i)}|x^{(i)};\Theta$ is $N(\Theta^Tx^{(i)}, \sigma^2)$</p>
<p>Hence the likelihood of $\Theta:L(\Theta)=\displaystyle\prod^M_{i=1}P(y^{(i)}|x^{(i)};\Theta)=\prod^M_{i=1}\frac1{\sqrt{2\pi}\sigma}exp(-\frac{(y^{(i)}-\Theta^Tx^{(i)})^2}{2\sigma^2})$</p>
<p>$l(\Theta)=log L(\Theta)=-\displaystyle\sum^M_{i=1}\frac{(y^{(i)}-\Theta^Tx^{(i)})^2}{2\sigma^2}-m log(\sqrt{2\pi}\sigma)$</p>
<p>Since $m log(\sqrt{2\pi}\sigma)$ is $\Theta$ irrelevant and $\sigma^2$ is a constant, to maximize $L(\Theta)$ is to minimize $\displaystyle\frac12\sum^{M}_{i=1}(y^{(i)}-\Theta^Tx^{(i)})^2$</p>
</li>
</ol>
<h1 id="Logistic-regression"><a href="#Logistic-regression" class="headerlink" title="Logistic regression"></a>Logistic regression</h1><ol>
<li><p>$y\in\{0,1\}$ is called binary classification. Linear regression is not a good algorithm for classification, for it might bias to fit a distant data. </p>
</li>
<li><p>Logistic regression: $h_\Theta(x)\in[0, 1]$</p>
</li>
<li><p>Sigmoid / logistic function: $g(z)=\displaystyle\frac1{1+e^{-z}}$, and in logistic regression $h_\Theta(x)=g(\Theta^Tx)$</p>
</li>
<li><p>$P(y=1|x;\Theta)=h_\Theta(x)$, conversely $P(y=0|x;\Theta)=1-h_\Theta(x)$. Namely $P(y|x;\Theta)=h_\Theta(x)^y(1-h_\Theta(x))^{1-y}$</p>
</li>
<li><p>$L(\Theta)=\displaystyle\prod^M_{i=1}h_\Theta(x^{(i)})^{y^{(i)}}(1-h_\Theta(x^{(i)})^{1-y^{(i)}}$</p>
<p>$l(\Theta)=\displaystyle\sum^M_{i=1}y^{(i)}log h_\Theta(x^{(i)})+(1-y^{(i)})log (1-h_\Theta(x^{(i)}))$</p>
</li>
<li><p>Choose $\Theta$ to maximize $l(\Theta)$ (Batch gradient ascent): $\Theta_j:=\Theta_j+\alpha\displaystyle\frac{\part}{\part\Theta_j}l(\Theta)=\Theta_j+\alpha\sum^M_{i=1}(y^{(i)}-h(x^{(i)})x_j^{(i)}$</p>
</li>
</ol>
<h1 id="Newton’s-method"><a href="#Newton’s-method" class="headerlink" title="Newton’s method"></a>Newton’s method</h1><ol>
<li><p>Have $f$, want to find $\Theta$, s.t. $f(\Theta)=0$</p>
</li>
<li><p>Start with $\Theta^{(0)}$, $\Theta^{(t+1)}:=\Theta^{(t)}-\displaystyle\frac{f(\Theta^{(t)})}{f’(\Theta^{(t)})}$. Set $\Theta^{t + 1}$ as the zero point of the tan line of $f$ at $\Theta^{(t)}$</p>
</li>
<li><p>Quradratic convergence: the errors decrease in quadratic. </p>
</li>
<li><p>When $\Theta$ is a vector: $\Theta^{t + 1}:=\Theta^{(t)}+H^{-1}\grad_\Theta l(\Theta)$, where $H$ is the Hessian matrix, $H_{ij}=\displaystyle\frac{\part^2l}{\part\Theta_i\part\Theta_j}$. </p>
<p>So the disadvantage of Newton’s method is that each step is much more expensive in high dimensional. </p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="LiyunZhang"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">LiyunZhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">221</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liyun Zhang</span>
</div>
<div class="BbeiAn-info">
       浙ICP备 -
    <a target="_blank" href="http://www.miitbeian.gov.cn/" style="color:#ffffff"  rel="nofollow">19047088号-1</a> <!--a标签中增加nofollow属性，避免爬虫出站。-->|
    <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011802001835" style="color:#ffffff;text-decoration:none;padding-left:30px;background:url(https://s1.ax1x.com/2018/09/29/ilmwIH.png) no-repeat left center" rel="nofollow">浙公网安备 33011802001835号</a>      <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->

</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
